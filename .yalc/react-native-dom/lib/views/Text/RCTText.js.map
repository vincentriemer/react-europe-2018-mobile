{"version":3,"sources":["../../../ReactDom/views/Text/RCTText.js"],"names":["styleElement","document","createElement","innerHTML","fontFamily","fontSize","lineHeight","fontWeight","letterSpacing","head","appendChild","RCTText","bridge","updateHostStyle","position","display","contain","opacity","whiteSpace","boxDecorationBreak","updateChildContainerStyle","width","isHighlighted","disabled","textDecorationColor","textDecorationLine","textDecorationStyle","style","pointerEvents","_selectable","_touchable","_disabled","value","color","getAlpha","setAlpha","darken","_highlightedBackgroundColor","toRgbString","a","r","g","b","stringValue","updatePointerEvents","textAlign","_isHighlighted","touchable","fontStyle","overflow","textOverflow","undefined"],"mappings":"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","file":"RCTText.js","sourcesContent":["/**\n * @providesModule RCTText\n * @flow\n */\n\nimport type RCTBridge from \"RCTBridge\";\n\nimport RCTView from \"RCTView\";\nimport RCTRawText from \"RCTRawText\";\nimport {\n  defaultFontStack,\n  defaultFontSize,\n  defaults as TextDefaults\n} from \"RCTSharedTextValues\";\nimport CustomElement from \"CustomElement\";\nimport ColorArrayFromHexARGB from \"ColorArrayFromHexARGB\";\nimport tinycolor from \"tinycolor2\";\n\n// inject default font stylesheet\n(() => {\n  const styleElement = document.createElement(\"style\");\n  styleElement.innerHTML = `\n    body, html {\n      font-family: ${TextDefaults.fontFamily};\n      font-size: ${TextDefaults.fontSize};\n      line-height: ${TextDefaults.lineHeight};\n      font-weight: ${TextDefaults.fontWeight};\n      letter-spacing: ${TextDefaults.letterSpacing};\n    }\n  `;\n  document.head && document.head.appendChild(styleElement);\n})();\n\n@CustomElement(\"rct-text\")\nclass RCTText extends RCTView {\n  _selectable: boolean;\n  _disabled: boolean;\n  _isHighlighted: ?boolean;\n  _highlightedBackgroundColor: ?string;\n\n  constructor(bridge: RCTBridge) {\n    super(bridge);\n\n    this.updateHostStyle({\n      position: \"static\",\n      display: \"inline\",\n      contain: \"none\",\n      opacity: \"1.0\",\n      whiteSpace: \"pre-wrap\",\n      boxDecorationBreak: \"clone\"\n    });\n\n    this.updateChildContainerStyle({\n      display: \"inline\",\n      contain: \"none\",\n      position: \"static\",\n      width: \"100%\"\n    });\n\n    this.isHighlighted = null;\n    this.disabled = true;\n    this.fontFamily = null;\n    this.fontSize = null;\n    this.lineHeight = null;\n    this.textDecorationColor = null;\n    this.textDecorationLine = null;\n    this.textDecorationStyle = null;\n  }\n\n  set backgroundColor(value: number | string) {\n    super.backgroundColor = value;\n\n    const color = tinycolor(value);\n    if (color.getAlpha() < 0.3) {\n      color.setAlpha(0.3);\n    }\n\n    color.darken();\n    this._highlightedBackgroundColor = color.toRgbString();\n  }\n\n  set color(value: number | string) {\n    if (typeof value === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(value);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.style.color = stringValue;\n    } else {\n      this.style.color = value;\n    }\n  }\n\n  get frame(): Frame {\n    return super.frame;\n  }\n\n  set frame(value: Frame) {\n    Object.assign(this, value);\n\n    // if text's frame is set revert back to block positioning\n    this.updateHostStyle({\n      position: \"absolute\",\n      display: \"inline-block\"\n    });\n\n    this.updateChildContainerStyle({\n      display: \"inline-block\"\n    });\n  }\n\n  set accessible(value: boolean) {\n    // no-op\n  }\n\n  set fontFamily(value: ?string) {\n    this.style.fontFamily = value ? value : \"inherit\";\n  }\n\n  set fontSize(value: ?number) {\n    this.style.fontSize = value ? `${value}px` : \"inherit\";\n  }\n\n  get selectable(): boolean {\n    return this._selectable;\n  }\n\n  set textAlign(value: string) {\n    this.style.textAlign = value;\n  }\n\n  updatePointerEvents() {\n    this.style.pointerEvents =\n      (this._selectable || this._touchable) && !this._disabled\n        ? \"auto\"\n        : \"none\";\n  }\n\n  set disabled(value: boolean) {\n    this.updatePointerEvents();\n  }\n\n  set isHighlighted(value: ?boolean) {\n    this._isHighlighted = value;\n    if (value !== null) {\n      this.touchable = true;\n      this.updateHostStyle(\n        \"backgroundImage\",\n        value\n          ? \"linear-gradient(-100deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2))\"\n          : \"\"\n      );\n    } else {\n      this.touchable = false;\n    }\n    this.updatePointerEvents();\n  }\n\n  set selectable(value: boolean) {\n    this._selectable = value;\n\n    this.updateHostStyle(\"userSelect\", value ? \"text\" : \"none\");\n    this.updatePointerEvents();\n  }\n\n  set fontWeight(value: ?string) {\n    this.style.fontWeight = value ? value : TextDefaults.fontWeight;\n  }\n\n  set fontStyle(value: ?string) {\n    this.style.fontStyle = value ? value : TextDefaults.fontStyle;\n  }\n\n  set letterSpacing(value: ?number) {\n    this.style.letterSpacing = value ? `${value}px` : \"inherit\";\n  }\n\n  set textDecorationLine(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationLine\",\n      value ? value : \"none\"\n    );\n  }\n\n  set textDecorationStyle(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationStyle\",\n      value ? value : \"solid\"\n    );\n  }\n\n  set textDecorationColor(value: ?number) {\n    if (value != null) {\n      const [a, r, g, b] = ColorArrayFromHexARGB(value);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.updateChildContainerStyle(\"textDecorationColor\", stringValue);\n    } else {\n      this.updateChildContainerStyle(\"textDecorationColor\", \"currentcolor\");\n    }\n  }\n\n  set lineHeight(value: ?number) {\n    this.updateHostStyle(\"lineHeight\", value ? `${value}px` : \"inherit\");\n  }\n\n  // TODO: ellipsizeMode\n\n  set numberOfLines(value: ?number) {\n    if (value === 1) {\n      this.updateHostStyle({\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        textOverflow: \"ellipsis\"\n      });\n      this.updateChildContainerStyle({\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      });\n    } else {\n      this.updateHostStyle({\n        overflow: \"visible\",\n        whiteSpace: \"pre-wrap\",\n        textOverflow: undefined\n      });\n      this.updateChildContainerStyle({\n        overflow: \"visible\",\n        textOverflow: undefined\n      });\n    }\n  }\n}\n\nexport default RCTText;\n"]}