{"version":3,"sources":["../../../ReactDom/views/Text/RCTText.js"],"names":["RCTText","bridge","updateHostStyle","position","display","contain","opacity","whiteSpace","boxDecorationBreak","updateChildContainerStyle","isHighlighted","disabled","fontFamily","fontSize","lineHeight","textDecorationColor","textDecorationLine","textDecorationStyle","style","pointerEvents","_selectable","_touchable","_disabled","value","color","getAlpha","setAlpha","darken","_highlightedBackgroundColor","toRgbString","a","r","g","b","stringValue","updatePointerEvents","textAlign","_isHighlighted","touchable","fontWeight","fontStyle","letterSpacing","overflow","textOverflow","undefined"],"mappings":"04BAOA,sC,gDACA,wC,qDACA,0DAKA,0D,2DACA,0E,2EACA,qC,yIAGMA,Q,OADL,4BAAc,UAAd,C,yEAOC,iBAAYC,MAAZ,CAA+B,iKACvBA,MADuB,GAG7B,MAAKC,eAAL,CAAqB,CACnBC,SAAU,QADS,CAEnBC,QAAS,QAFU,CAGnBC,QAAS,MAHU,CAInBC,QAAS,KAJU,CAKnBC,WAAY,UALO,CAMnBC,mBAAoB,OAND,CAArB,EASA,MAAKC,yBAAL,CAA+B,CAC7BL,QAAS,QADoB,CAE7BC,QAAS,MAFoB,CAG7BF,SAAU,QAHmB,CAA/B,EAMA,MAAKO,aAAL,CAAqB,IAArB,CACA,MAAKC,QAAL,CAAgB,IAAhB,CACA,MAAKC,UAAL,uCACA,MAAKC,QAAL,sCACA,MAAKC,UAAL,CAAkB,IAAlB,CACA,MAAKC,mBAAL,CAA2B,IAA3B,CACA,MAAKC,kBAAL,CAA0B,IAA1B,CACA,MAAKC,mBAAL,CAA2B,IAA3B,CAzB6B,aA0B9B,C,kGA0DqB,CACpB,KAAKC,KAAL,CAAWC,aAAX,CACE,CAAC,KAAKC,WAAL,EAAoB,KAAKC,UAA1B,GAAyC,CAAC,KAAKC,SAA/C,CACI,MADJ,CAEI,MAHN,CAID,C,0CA7DmBC,K,CAAwB,CAC1C,0GAAwBA,KAAxB,OAEA,GAAMC,OAAQ,wBAAUD,KAAV,CAAd,CACA,GAAIC,MAAMC,QAAN,GAAmB,GAAvB,CAA4B,CAC1BD,MAAME,QAAN,CAAe,GAAf,EACD,CAEDF,MAAMG,MAAN,GACA,KAAKC,2BAAL,CAAmCJ,MAAMK,WAAN,EAAnC,CACD,C,gCAESN,K,CAAwB,CAChC,GAAI,MAAOA,MAAP,GAAiB,QAArB,CAA+B,2BACR,oCAAsBA,KAAtB,CADQ,6EACtBO,CADsB,2BACnBC,CADmB,2BAChBC,CADgB,2BACbC,CADa,2BAE7B,GAAMC,qBAAsBH,CAAtB,KAA2BC,CAA3B,KAAgCC,CAAhC,KAAqCH,CAArC,IAAN,CACA,KAAKZ,KAAL,CAAWM,KAAX,CAAmBU,WAAnB,CACD,CAJD,IAIO,CACL,KAAKhB,KAAL,CAAWM,KAAX,CAAmBD,KAAnB,CACD,CACF,C,iCAEkB,CACjB,4GACD,C,kBAESA,K,CAAc,CACtB,gGAAcA,KAAd,OAGA,KAAKrB,eAAL,CAAqB,CACnBC,SAAU,UADS,CAEnBC,QAAS,cAFU,CAArB,EAID,C,qCAEcmB,K,CAAgB,CAE9B,C,qCAEcA,K,CAAgB,CAC7B,KAAKL,KAAL,CAAWN,UAAX,CAAwBW,MAAQA,KAAR,CAAgB,8BAAaX,UAArD,CACD,C,mCAEYW,K,CAAgB,CAC3B,KAAKL,KAAL,CAAWL,QAAX,CAAsBU,MAAWA,KAAX,MAAuB,8BAAaV,QAA1D,CACD,C,sCAEyB,CACxB,MAAO,MAAKO,WAAZ,CACD,C,kBAiCcG,K,CAAgB,CAC7B,KAAKH,WAAL,CAAmBG,KAAnB,CAEA,KAAKrB,eAAL,CAAqB,YAArB,CAAmCqB,MAAQ,MAAR,CAAiB,MAApD,EACA,KAAKY,mBAAL,GACD,C,oCApCaZ,K,CAAe,CAC3B,KAAKL,KAAL,CAAWkB,SAAX,CAAuBb,KAAvB,CACD,C,mCASYA,K,CAAgB,CAC3B,KAAKY,mBAAL,GACD,C,wCAEiBZ,K,CAAiB,CACjC,KAAKc,cAAL,CAAsBd,KAAtB,CACA,GAAIA,QAAU,IAAd,CAAoB,CAClB,KAAKe,SAAL,CAAiB,IAAjB,CACA,KAAKpC,eAAL,CACE,iBADF,CAEEqB,MACI,4DADJ,CAEI,EAJN,EAMD,CARD,IAQO,CACL,KAAKe,SAAL,CAAiB,KAAjB,CACD,CACD,KAAKH,mBAAL,GACD,C,qCAScZ,K,CAAgB,CAC7B,KAAKL,KAAL,CAAWqB,UAAX,CAAwBhB,MAAQA,KAAR,CAAgB,8BAAagB,UAArD,CACD,C,oCAEahB,K,CAAgB,CAC5B,KAAKL,KAAL,CAAWsB,SAAX,CAAuBjB,MAAQA,KAAR,CAAgB,8BAAaiB,SAApD,CACD,C,wCAEiBjB,K,CAAgB,CAChC,KAAKL,KAAL,CAAWuB,aAAX,CAA2BlB,MACpBA,KADoB,MAEvB,8BAAakB,aAFjB,CAGD,C,6CAEsBlB,K,CAAgB,CACrC,KAAKd,yBAAL,CACE,oBADF,CAEEc,MAAQA,KAAR,CAAgB,MAFlB,EAID,C,8CAEuBA,K,CAAgB,CACtC,KAAKd,yBAAL,CACE,qBADF,CAEEc,MAAQA,KAAR,CAAgB,OAFlB,EAID,C,8CAEuBA,K,CAAgB,CACtC,GAAIA,OAAS,IAAb,CAAmB,4BACI,oCAAsBA,KAAtB,CADJ,8EACVO,CADU,2BACPC,CADO,2BACJC,CADI,2BACDC,CADC,2BAEjB,GAAMC,qBAAsBH,CAAtB,KAA2BC,CAA3B,KAAgCC,CAAhC,KAAqCH,CAArC,IAAN,CACA,KAAKrB,yBAAL,CAA+B,qBAA/B,CAAsDyB,WAAtD,EACD,CAJD,IAIO,CACL,KAAKzB,yBAAL,CAA+B,qBAA/B,CAAsD,cAAtD,EACD,CACF,C,qCAEcc,K,CAAgB,CAC7B,KAAKrB,eAAL,CACE,YADF,CAEEqB,MAAWA,KAAX,MAAuB,8BAAaT,UAFtC,EAID,C,wCAEiBS,K,CAAgB,CAChC,GAAIA,QAAU,CAAd,CAAiB,CACf,KAAKrB,eAAL,CAAqB,CACnBwC,SAAU,QADS,CAEnBnC,WAAY,QAFO,CAGnBoC,aAAc,UAHK,CAArB,EAKD,CAND,IAMO,CACL,KAAKzC,eAAL,CAAqB,CACnBwC,SAAU,SADS,CAEnBnC,WAAY,UAFO,CAGnBoC,aAAcC,SAHK,CAArB,EAKD,CACF,C,kEAGY5C,O","file":"RCTText.js","sourcesContent":["/**\n * @providesModule RCTText\n * @flow\n */\n\nimport type RCTBridge from \"RCTBridge\";\n\nimport RCTView from \"RCTView\";\nimport RCTRawText from \"RCTRawText\";\nimport {\n  defaultFontStack,\n  defaultFontSize,\n  defaults as TextDefaults\n} from \"RCTSharedTextValues\";\nimport CustomElement from \"CustomElement\";\nimport ColorArrayFromHexARGB from \"ColorArrayFromHexARGB\";\nimport tinycolor from \"tinycolor2\";\n\n@CustomElement(\"rct-text\")\nclass RCTText extends RCTView {\n  _selectable: boolean;\n  _disabled: boolean;\n  _isHighlighted: ?boolean;\n  _highlightedBackgroundColor: ?string;\n\n  constructor(bridge: RCTBridge) {\n    super(bridge);\n\n    this.updateHostStyle({\n      position: \"static\",\n      display: \"inline\",\n      contain: \"none\",\n      opacity: \"1.0\",\n      whiteSpace: \"pre-wrap\",\n      boxDecorationBreak: \"clone\"\n    });\n\n    this.updateChildContainerStyle({\n      display: \"inline\",\n      contain: \"none\",\n      position: \"static\"\n    });\n\n    this.isHighlighted = null;\n    this.disabled = true;\n    this.fontFamily = defaultFontStack;\n    this.fontSize = defaultFontSize;\n    this.lineHeight = null;\n    this.textDecorationColor = null;\n    this.textDecorationLine = null;\n    this.textDecorationStyle = null;\n  }\n\n  set backgroundColor(value: number | string) {\n    super.backgroundColor = value;\n\n    const color = tinycolor(value);\n    if (color.getAlpha() < 0.3) {\n      color.setAlpha(0.3);\n    }\n\n    color.darken();\n    this._highlightedBackgroundColor = color.toRgbString();\n  }\n\n  set color(value: number | string) {\n    if (typeof value === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(value);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.style.color = stringValue;\n    } else {\n      this.style.color = value;\n    }\n  }\n\n  get frame(): Frame {\n    return super.frame;\n  }\n\n  set frame(value: Frame) {\n    super.frame = value;\n\n    // if text's frame is set revert back to block positioning\n    this.updateHostStyle({\n      position: \"absolute\",\n      display: \"inline-block\"\n    });\n  }\n\n  set accessible(value: boolean) {\n    // no-op\n  }\n\n  set fontFamily(value: ?string) {\n    this.style.fontFamily = value ? value : TextDefaults.fontFamily;\n  }\n\n  set fontSize(value: ?number) {\n    this.style.fontSize = value ? `${value}px` : TextDefaults.fontSize;\n  }\n\n  get selectable(): boolean {\n    return this._selectable;\n  }\n\n  set textAlign(value: string) {\n    this.style.textAlign = value;\n  }\n\n  updatePointerEvents() {\n    this.style.pointerEvents =\n      (this._selectable || this._touchable) && !this._disabled\n        ? \"auto\"\n        : \"none\";\n  }\n\n  set disabled(value: boolean) {\n    this.updatePointerEvents();\n  }\n\n  set isHighlighted(value: ?boolean) {\n    this._isHighlighted = value;\n    if (value !== null) {\n      this.touchable = true;\n      this.updateHostStyle(\n        \"backgroundImage\",\n        value\n          ? \"linear-gradient(-100deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2))\"\n          : \"\"\n      );\n    } else {\n      this.touchable = false;\n    }\n    this.updatePointerEvents();\n  }\n\n  set selectable(value: boolean) {\n    this._selectable = value;\n\n    this.updateHostStyle(\"userSelect\", value ? \"text\" : \"none\");\n    this.updatePointerEvents();\n  }\n\n  set fontWeight(value: ?string) {\n    this.style.fontWeight = value ? value : TextDefaults.fontWeight;\n  }\n\n  set fontStyle(value: ?string) {\n    this.style.fontStyle = value ? value : TextDefaults.fontStyle;\n  }\n\n  set letterSpacing(value: ?number) {\n    this.style.letterSpacing = value\n      ? `${value}px`\n      : TextDefaults.letterSpacing;\n  }\n\n  set textDecorationLine(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationLine\",\n      value ? value : \"none\"\n    );\n  }\n\n  set textDecorationStyle(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationStyle\",\n      value ? value : \"solid\"\n    );\n  }\n\n  set textDecorationColor(value: ?number) {\n    if (value != null) {\n      const [a, r, g, b] = ColorArrayFromHexARGB(value);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.updateChildContainerStyle(\"textDecorationColor\", stringValue);\n    } else {\n      this.updateChildContainerStyle(\"textDecorationColor\", \"currentcolor\");\n    }\n  }\n\n  set lineHeight(value: ?number) {\n    this.updateHostStyle(\n      \"lineHeight\",\n      value ? `${value}px` : TextDefaults.lineHeight\n    );\n  }\n\n  set numberOfLines(value: ?number) {\n    if (value === 1) {\n      this.updateHostStyle({\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        textOverflow: \"ellipsis\"\n      });\n    } else {\n      this.updateHostStyle({\n        overflow: \"visible\",\n        whiteSpace: \"pre-wrap\",\n        textOverflow: undefined\n      });\n    }\n  }\n}\n\nexport default RCTText;\n"]}