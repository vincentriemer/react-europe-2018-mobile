var _regenerator=require("babel-runtime/regenerator");var _regenerator2=_interopRequireDefault(_regenerator);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _this2=this;var _RCTBridge=require("./../../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);var _RCTImageView=require("./RCTImageView");var _RCTImageView2=_interopRequireDefault(_RCTImageView);var _RCTImageSource=require("./RCTImageSource");var _RCTImageSource2=_interopRequireDefault(_RCTImageSource);var _RCTViewManager3=require("./../RCTViewManager");var _RCTViewManager4=_interopRequireDefault(_RCTViewManager3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object['ke'+'ys'](descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object['define'+'Property'](target,property,desc);desc=null;}return desc;}module.exports=function _callee(){var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_dec11,_class,_desc,_value,_class2;var RCTViewManager,RCT_EXPORT_VIEW_PROP,RCTImageViewManager;return _regenerator2.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator2.default.awrap(_RCTViewManager4.default);case 2:RCTViewManager=_context.sent;RCT_EXPORT_VIEW_PROP=RCTViewManager.RCT_EXPORT_VIEW_PROP;RCTImageViewManager=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTImageViewManager"),_dec2=RCT_EXPORT_VIEW_PROP("source","array"),_dec3=RCT_EXPORT_VIEW_PROP("resizeMode","string"),_dec4=RCT_EXPORT_VIEW_PROP("blurRadius","number"),_dec5=RCT_EXPORT_VIEW_PROP("tintColor","color"),_dec6=RCT_EXPORT_VIEW_PROP("onLoadStart","RCTDirectEventBlock"),_dec7=RCT_EXPORT_VIEW_PROP("onLoad","RCTDirectEventBlock"),_dec8=RCT_EXPORT_VIEW_PROP("onLoadEnd","RCTDirectEventBlock"),_dec9=RCT_EXPORT_VIEW_PROP("onError","RCTDirectEventBlock"),_dec10=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypePromise),_dec11=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec(_class=(_class2=function(_RCTViewManager2){(0,_inherits3.default)(RCTImageViewManager,_RCTViewManager2);function RCTImageViewManager(bridge){(0,_classCallCheck3.default)(this,RCTImageViewManager);var _this=(0,_possibleConstructorReturn3.default)(this,(RCTImageViewManager.__proto__||Object.getPrototypeOf(RCTImageViewManager)).call(this,bridge));_this.__props=_this.__props.filter(function(v){return v.name!=="hitSlop";});return _this;}(0,_createClass3.default)(RCTImageViewManager,[{key:"view",value:function view(){return new _RCTImageView2.default(this.bridge);}},{key:"setImageSources",value:function setImageSources(view,value){var imageSources=value.map(function(srcJson){var size={width:srcJson.width!=null?srcJson.width:0,height:srcJson.height!=null?srcJson.height:0};var imageSource=new _RCTImageSource2.default(srcJson.uri,size,srcJson.scale?srcJson.scale:1);if(srcJson.__packager_asset!=null){imageSource.packagerAsset=srcJson.__packager_asset;}return imageSource;});view.imageSources=imageSources;}},{key:"setResizeMode",value:function setResizeMode(view,value){view.resizeMode=value;}},{key:"setBlurRadius",value:function setBlurRadius(view,value){view.blurRadius=value;}},{key:"setTintColor",value:function setTintColor(view,value){view.tintColor=value;}},{key:"setOnLoadStart",value:function setOnLoadStart(view,value){view.onLoadStart=value;}},{key:"setOnLoad",value:function setOnLoad(view,value){view.onLoad=value;}},{key:"setOnLoadEnd",value:function setOnLoadEnd(view,value){view.onLoadEnd=value;}},{key:"setOnError",value:function setOnError(){}},{key:"prefetchImage",value:function prefetchImage(url,resolveId,rejectId){var resolve=this.bridge.callbackFromId(resolveId);var reject=this.bridge.callbackFromId(rejectId);this.bridge.imageLoader.loadImageWithURLRequest(url).then(function(){resolve(true);}).catch(function(error){reject("E_PREFETCH_FAILURE",null,error);});}},{key:"getSize",value:function getSize(request,successId,errorId){var success=this.bridge.callbackFromId(successId);var error=this.bridge.callbackFromId(errorId);this.bridge.imageLoader.getImageSizeForURLRequest(request).then(function(size){success(size.width,size.height);}).catch(function(errorMsg){error(errorMsg);});}}]);return RCTImageViewManager;}(RCTViewManager),(_applyDecoratedDescriptor(_class2.prototype,"setImageSources",[_dec2],Object.getOwnPropertyDescriptor(_class2.prototype,"setImageSources"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setResizeMode",[_dec3],Object.getOwnPropertyDescriptor(_class2.prototype,"setResizeMode"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setBlurRadius",[_dec4],Object.getOwnPropertyDescriptor(_class2.prototype,"setBlurRadius"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setTintColor",[_dec5],Object.getOwnPropertyDescriptor(_class2.prototype,"setTintColor"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setOnLoadStart",[_dec6],Object.getOwnPropertyDescriptor(_class2.prototype,"setOnLoadStart"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setOnLoad",[_dec7],Object.getOwnPropertyDescriptor(_class2.prototype,"setOnLoad"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setOnLoadEnd",[_dec8],Object.getOwnPropertyDescriptor(_class2.prototype,"setOnLoadEnd"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setOnError",[_dec9],Object.getOwnPropertyDescriptor(_class2.prototype,"setOnError"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"prefetchImage",[_dec10],Object.getOwnPropertyDescriptor(_class2.prototype,"prefetchImage"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"getSize",[_dec11],Object.getOwnPropertyDescriptor(_class2.prototype,"getSize"),_class2.prototype)),_class2))||_class);return _context.abrupt("return",RCTImageViewManager);case 6:case"end":return _context.stop();}}},null,_this2);}();
//# sourceMappingURL=RCTImageViewManager.js.map