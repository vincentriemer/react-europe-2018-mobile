Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _dec,_class;var _RCTBridge=require("./../../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTImageLoader=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTImageLoader"),_dec(_class=function(){function RCTImageLoader(bridge){(0,_classCallCheck3.default)(this,RCTImageLoader);this.bridge=bridge;this.imageCache={};}(0,_createClass3.default)(RCTImageLoader,[{key:"loadImage",value:function loadImage(url){var loadPromise=new Promise(function(resolve,reject){var image=new Image();image.onload=function(){return resolve(image);};image.onerror=function(){return reject();};image.src=url;});this.imageCache[url]=loadPromise;return loadPromise;}},{key:"getImagePromise",value:function getImagePromise(url){var existingImage=this.imageCache[url];if(existingImage!=null){return existingImage;}else{return this.loadImage(url);}}},{key:"loadImageWithURLRequest",value:function loadImageWithURLRequest(url){return this.getImagePromise(url);}},{key:"getImageSizeForURLRequest",value:function getImageSizeForURLRequest(url){return this.getImagePromise(url).then(function(image){return{width:image.width,height:image.height};});}}]);return RCTImageLoader;}())||_class);exports.default=RCTImageLoader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1JlYWN0RG9tL3ZpZXdzL0ltYWdlL1JDVEltYWdlTG9hZGVyLmpzIl0sIm5hbWVzIjpbIlJDVEltYWdlTG9hZGVyIiwiYnJpZGdlIiwiaW1hZ2VDYWNoZSIsInVybCIsImxvYWRQcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbWFnZSIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsInNyYyIsImV4aXN0aW5nSW1hZ2UiLCJsb2FkSW1hZ2UiLCJnZXRJbWFnZVByb21pc2UiLCJ0aGVuIiwid2lkdGgiLCJoZWlnaHQiXSwibWFwcGluZ3MiOiJtVUFLQSxtRCx5SUFRTUEsZSxPQURMLGlDQUFrQixnQkFBbEIsQyx3QkFNQyx3QkFBWUMsTUFBWixDQUErQixtREFDN0IsS0FBS0EsTUFBTCxDQUFjQSxNQUFkLENBQ0EsS0FBS0MsVUFBTCxDQUFrQixFQUFsQixDQUNELEMsb0ZBRVNDLEcsQ0FBNkIsQ0FDckMsR0FBTUMsYUFBYyxHQUFJQyxRQUFKLENBQVksU0FBQ0MsT0FBRCxDQUFVQyxNQUFWLENBQXFCLENBQ25ELEdBQU1DLE9BQVEsR0FBSUMsTUFBSixFQUFkLENBQ0FELE1BQU1FLE1BQU4sQ0FBZSxpQkFBTUosU0FBUUUsS0FBUixDQUFOLEVBQWYsQ0FDQUEsTUFBTUcsT0FBTixDQUFnQixpQkFBTUosU0FBTixFQUFoQixDQUNBQyxNQUFNSSxHQUFOLENBQVlULEdBQVosQ0FDRCxDQUxtQixDQUFwQixDQU9BLEtBQUtELFVBQUwsQ0FBZ0JDLEdBQWhCLEVBQXVCQyxXQUF2QixDQUVBLE1BQU9BLFlBQVAsQ0FDRCxDLHdEQUVlRCxHLENBQTZCLENBQzNDLEdBQU1VLGVBQWdCLEtBQUtYLFVBQUwsQ0FBZ0JDLEdBQWhCLENBQXRCLENBQ0EsR0FBSVUsZUFBaUIsSUFBckIsQ0FBMkIsQ0FDekIsTUFBT0EsY0FBUCxDQUNELENBRkQsSUFFTyxDQUNMLE1BQU8sTUFBS0MsU0FBTCxDQUFlWCxHQUFmLENBQVAsQ0FDRCxDQUNGLEMsd0VBRXVCQSxHLENBQTZCLENBQ25ELE1BQU8sTUFBS1ksZUFBTCxDQUFxQlosR0FBckIsQ0FBUCxDQUNELEMsNEVBRXlCQSxHLENBQTRCLENBQ3BELE1BQU8sTUFBS1ksZUFBTCxDQUFxQlosR0FBckIsRUFBMEJhLElBQTFCLENBQStCLFNBQUNSLEtBQUQsQ0FBa0IsQ0FDdEQsTUFBTyxDQUNMUyxNQUFPVCxNQUFNUyxLQURSLENBRUxDLE9BQVFWLE1BQU1VLE1BRlQsQ0FBUCxDQUlELENBTE0sQ0FBUCxDQU1ELEMsd0RBR1lsQixjIiwiZmlsZSI6IlJDVEltYWdlTG9hZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUkNUSW1hZ2VMb2FkZXJcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IFJDVEJyaWRnZSwge1xuICBSQ1RfRVhQT1JUX01PRFVMRSxcbiAgUkNUX0VYUE9SVF9NRVRIT0QsXG4gIFJDVEZ1bmN0aW9uVHlwZU5vcm1hbCxcbiAgUkNURnVuY3Rpb25UeXBlUHJvbWlzZVxufSBmcm9tIFwiUkNUQnJpZGdlXCI7XG5cbkBSQ1RfRVhQT1JUX01PRFVMRShcIlJDVEltYWdlTG9hZGVyXCIpXG5jbGFzcyBSQ1RJbWFnZUxvYWRlciB7XG4gIGJyaWRnZTogUkNUQnJpZGdlO1xuXG4gIGltYWdlQ2FjaGU6IHsgW2NhY2hlS2V5OiBzdHJpbmddOiBQcm9taXNlPEltYWdlPiB9O1xuXG4gIGNvbnN0cnVjdG9yKGJyaWRnZTogUkNUQnJpZGdlKSB7XG4gICAgdGhpcy5icmlkZ2UgPSBicmlkZ2U7XG4gICAgdGhpcy5pbWFnZUNhY2hlID0ge307XG4gIH1cblxuICBsb2FkSW1hZ2UodXJsOiBzdHJpbmcpOiBQcm9taXNlPEltYWdlPiB7XG4gICAgY29uc3QgbG9hZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4gcmVzb2x2ZShpbWFnZSk7XG4gICAgICBpbWFnZS5vbmVycm9yID0gKCkgPT4gcmVqZWN0KCk7XG4gICAgICBpbWFnZS5zcmMgPSB1cmw7XG4gICAgfSk7XG5cbiAgICB0aGlzLmltYWdlQ2FjaGVbdXJsXSA9IGxvYWRQcm9taXNlO1xuXG4gICAgcmV0dXJuIGxvYWRQcm9taXNlO1xuICB9XG5cbiAgZ2V0SW1hZ2VQcm9taXNlKHVybDogc3RyaW5nKTogUHJvbWlzZTxJbWFnZT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nSW1hZ2UgPSB0aGlzLmltYWdlQ2FjaGVbdXJsXTtcbiAgICBpZiAoZXhpc3RpbmdJbWFnZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZXhpc3RpbmdJbWFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMubG9hZEltYWdlKHVybCk7XG4gICAgfVxuICB9XG5cbiAgbG9hZEltYWdlV2l0aFVSTFJlcXVlc3QodXJsOiBzdHJpbmcpOiBQcm9taXNlPEltYWdlPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VQcm9taXNlKHVybCk7XG4gIH1cblxuICBnZXRJbWFnZVNpemVGb3JVUkxSZXF1ZXN0KHVybDogc3RyaW5nKTogUHJvbWlzZTxTaXplPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VQcm9taXNlKHVybCkudGhlbigoaW1hZ2U6IEltYWdlKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogaW1hZ2Uud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1hZ2UuaGVpZ2h0XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJDVEltYWdlTG9hZGVyO1xuIl19