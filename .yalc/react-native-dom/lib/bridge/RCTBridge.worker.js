var _toConsumableArray2=require("babel-runtime/helpers/toConsumableArray");var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}ErrorUtils={setGlobalHandler:function setGlobalHandler(){},reportFatalError:console.error};function sendMessage(topic,payload){postMessage({topic:topic,payload:payload});}var Status=undefined;function loadBundle(bundle){return new Promise(function(resolve,reject){if(__DEV__){var xmlHttp=new XMLHttpRequest();xmlHttp.open("GET",bundle,true);xmlHttp.setRequestHeader("Accept","multipart/mixed");xmlHttp.onload=function(){importScripts(bundle);resolve();};xmlHttp.onerror=function(evt){reject(evt);};xmlHttp.onabort=function(evt){reject(evt);};xmlHttp.onprogress=function(evt){var progressEvents=xmlHttp.response.match(/\{[\S]*\}/g);if(progressEvents){var _JSON$parse=JSON.parse(progressEvents[progressEvents.length-1]),done=_JSON$parse.done,total=_JSON$parse.total;if(done&&total){sendMessage("updateProgress",{done:done,total:total});}}};xmlHttp.send();}else{importScripts(bundle);resolve();}});}function handleError(e){console.warn(e);var xmlhttp=new XMLHttpRequest();xmlhttp.open("GET",bundle,true);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){var result=JSON.parse(xmlhttp.responseText);if(result){if(result.type==="UnableToResolveError"||result.type==="NotFoundError"){console.warn(result.message);}else{if(result.snippet){result.snippet=result.snippet.replace(/\u001b\[.*?m/g,"").split("\\n");}if(result.filename&&result.filename.indexOf(":")<=2){result.filename="file:///"+result.filename;}if(result.errors){for(var i=0;i<result.errors.length;i++){var error=result.errors[i];if(error.filename&&error.filename.indexOf(":")<=2){error.filename="file:///"+error.filename;}}}console.warn(JSON.stringify(result,undefined,2));}}}xmlhttp.send(null);};}onmessage=function onmessage(_ref){var data=_ref.data;var topic=data.topic,payload=data.payload;switch(topic){case"loadBridgeConfig":{var config=payload.config,_bundle=payload.bundle;__fbBatchedBridgeConfig=config;loadBundle(_bundle).then(function(){sendMessage("bundleFinishedLoading");}).catch(handleError);break;}case"callFunctionReturnFlushedQueue":{try{if(self.__fbBatchedBridge){var _fbBatchedBridge;var flushedQueue=(_fbBatchedBridge=__fbBatchedBridge).callFunctionReturnFlushedQueue.apply(_fbBatchedBridge,(0,_toConsumableArray3.default)(payload));sendMessage("flushedQueue",flushedQueue);}}catch(e){console.warn(e);console.warn("topic",topic);console.warn("payload",payload);}break;}case"invokeCallbackAndReturnFlushedQueue":{try{if(self.__fbBatchedBridge){var _fbBatchedBridge2;var _flushedQueue=(_fbBatchedBridge2=__fbBatchedBridge).invokeCallbackAndReturnFlushedQueue.apply(_fbBatchedBridge2,(0,_toConsumableArray3.default)(payload));sendMessage("flushedQueue",_flushedQueue);}}catch(e){console.warn(e);console.warn("topic",topic);console.warn("payload",payload);}break;}case"flush":{try{if(self.__fbBatchedBridge){var _flushedQueue2=__fbBatchedBridge.flushedQueue.apply(null);sendMessage("flushedQueue",_flushedQueue2);}}catch(e){console.warn(e);console.warn("topic",topic);console.warn("payload",payload);}break;}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1JlYWN0RG9tL2JyaWRnZS9SQ1RCcmlkZ2Uud29ya2VyLmpzIl0sIm5hbWVzIjpbIkVycm9yVXRpbHMiLCJzZXRHbG9iYWxIYW5kbGVyIiwicmVwb3J0RmF0YWxFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsInNlbmRNZXNzYWdlIiwidG9waWMiLCJwYXlsb2FkIiwicG9zdE1lc3NhZ2UiLCJTdGF0dXMiLCJ1bmRlZmluZWQiLCJsb2FkQnVuZGxlIiwiYnVuZGxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJfX0RFVl9fIiwieG1sSHR0cCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJpbXBvcnRTY3JpcHRzIiwib25lcnJvciIsImV2dCIsIm9uYWJvcnQiLCJvbnByb2dyZXNzIiwicHJvZ3Jlc3NFdmVudHMiLCJyZXNwb25zZSIsIm1hdGNoIiwiSlNPTiIsInBhcnNlIiwibGVuZ3RoIiwiZG9uZSIsInRvdGFsIiwic2VuZCIsImhhbmRsZUVycm9yIiwiZSIsIndhcm4iLCJ4bWxodHRwIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3VsdCIsInJlc3BvbnNlVGV4dCIsInR5cGUiLCJtZXNzYWdlIiwic25pcHBldCIsInJlcGxhY2UiLCJzcGxpdCIsImZpbGVuYW1lIiwiaW5kZXhPZiIsImVycm9ycyIsImkiLCJzdHJpbmdpZnkiLCJvbm1lc3NhZ2UiLCJkYXRhIiwiY29uZmlnIiwiX19mYkJhdGNoZWRCcmlkZ2VDb25maWciLCJ0aGVuIiwiY2F0Y2giLCJzZWxmIiwiX19mYkJhdGNoZWRCcmlkZ2UiLCJmbHVzaGVkUXVldWUiLCJjYWxsRnVuY3Rpb25SZXR1cm5GbHVzaGVkUXVldWUiLCJpbnZva2VDYWxsYmFja0FuZFJldHVybkZsdXNoZWRRdWV1ZSIsImFwcGx5Il0sIm1hcHBpbmdzIjoia09BQUFBLFdBQWEsQ0FDWEMsaUJBQWtCLDJCQUFNLENBQUUsQ0FE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Q0FBYSxPQUFiLENBQXNCaEMsS0FBdEIsRUFDQUgsUUFBUW1DLElBQVIsQ0FBYSxTQUFiLENBQXdCL0IsT0FBeEIsRUFDRCxDQUNELE1BQ0QsQ0FDRCxJQUFLLHFDQUFMLENBQTRDLENBQzFDLEdBQUksQ0FDRixHQUFJcUQsS0FBS0MsaUJBQVQsQ0FBNEIsdUJBQzFCLEdBQU1DLGVBQWUsc0NBQWtCRSxtQ0FBbEIseURBQ2hCekQsT0FEZ0IsRUFBckIsQ0FHQUYsWUFBWSxjQUFaLENBQTRCeUQsYUFBNUIsRUFDRCxDQUNGLENBQUMsTUFBT3pCLENBQVAsQ0FBVSxDQUNWbEMsUUFBUW1DLElBQVIsQ0FBYUQsQ0FBYixFQUNBbEMsUUFBUW1DLElBQVIsQ0FBYSxPQUFiLENBQXNCaEMsS0FBdEIsRUFDQUgsUUFBUW1DLElBQVIsQ0FBYSxTQUFiLENBQXdCL0IsT0FBeEIsRUFDRCxDQUNELE1BQ0QsQ0FDRCxJQUFLLE9BQUwsQ0FBYyxDQUNaLEdBQUksQ0FDRixHQUFJcUQsS0FBS0MsaUJBQVQsQ0FBNEIsQ0FDMUIsR0FBTUMsZ0JBQWVELGtCQUFrQkMsWUFBbEIsQ0FBK0JHLEtBQS9CLENBQXFDLElBQXJDLENBQXJCLENBQ0E1RCxZQUFZLGNBQVosQ0FBNEJ5RCxjQUE1QixFQUNELENBQ0YsQ0FBQyxNQUFPekIsQ0FBUCxDQUFVLENBQ1ZsQyxRQUFRbUMsSUFBUixDQUFhRCxDQUFiLEVBQ0FsQyxRQUFRbUMsSUFBUixDQUFhLE9BQWIsQ0FBc0JoQyxLQUF0QixFQUNBSCxRQUFRbUMsSUFBUixDQUFhLFNBQWIsQ0FBd0IvQixPQUF4QixFQUNELENBQ0QsTUFDRCxDQXJESCxDQXVERCxDQTNERCIsImZpbGUiOiJSQ1RCcmlkZ2Uud29ya2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiRXJyb3JVdGlscyA9IHtcbiAgc2V0R2xvYmFsSGFuZGxlcjogKCkgPT4ge30sXG4gIHJlcG9ydEZhdGFsRXJyb3I6IGNvbnNvbGUuZXJyb3Jcbn07XG5cbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKHRvcGljLCBwYXlsb2FkKSB7XG4gIHBvc3RNZXNzYWdlKHsgdG9waWMsIHBheWxvYWQgfSk7XG59XG5cbnZhciBTdGF0dXMgPSB1bmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGxvYWRCdW5kbGUoYnVuZGxlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCBidW5kbGUsIHRydWUpO1xuICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwibXVsdGlwYXJ0L21peGVkXCIpO1xuICAgICAgeG1sSHR0cC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaW1wb3J0U2NyaXB0cyhidW5kbGUpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgeG1sSHR0cC5vbmVycm9yID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIHJlamVjdChldnQpO1xuICAgICAgfTtcbiAgICAgIHhtbEh0dHAub25hYm9ydCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICByZWplY3QoZXZ0KTtcbiAgICAgIH07XG4gICAgICB4bWxIdHRwLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NFdmVudHMgPSB4bWxIdHRwLnJlc3BvbnNlLm1hdGNoKC9cXHtbXFxTXSpcXH0vZyk7XG4gICAgICAgIGlmIChwcm9ncmVzc0V2ZW50cykge1xuICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdG90YWwgfSA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICBwcm9ncmVzc0V2ZW50c1twcm9ncmVzc0V2ZW50cy5sZW5ndGggLSAxXVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoZG9uZSAmJiB0b3RhbCkge1xuICAgICAgICAgICAgc2VuZE1lc3NhZ2UoXCJ1cGRhdGVQcm9ncmVzc1wiLCB7IGRvbmUsIHRvdGFsIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHhtbEh0dHAuc2VuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbXBvcnRTY3JpcHRzKGJ1bmRsZSk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZSkge1xuICBjb25zb2xlLndhcm4oZSk7XG4gIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHhtbGh0dHAub3BlbihcIkdFVFwiLCBidW5kbGUsIHRydWUpO1xuICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcmVzdWx0LnR5cGUgPT09IFwiVW5hYmxlVG9SZXNvbHZlRXJyb3JcIiB8fFxuICAgICAgICAgIHJlc3VsdC50eXBlID09PSBcIk5vdEZvdW5kRXJyb3JcIlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4ocmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChyZXN1bHQuc25pcHBldCkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGFsbCBjb2xvciBjaGFyYWN0ZXJzIGFuZCBzcGxpdCB0aGUgbGluZXMgZm9yIGltcHJvdmVkIGNsYXJpdHlcbiAgICAgICAgICAgIHJlc3VsdC5zbmlwcGV0ID0gcmVzdWx0LnNuaXBwZXRcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcdTAwMWJcXFsuKj9tL2csIFwiXCIpXG4gICAgICAgICAgICAgIC5zcGxpdChcIlxcXFxuXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVzdWx0LmZpbGVuYW1lICYmIHJlc3VsdC5maWxlbmFtZS5pbmRleE9mKFwiOlwiKSA8PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBcImZpbGU6Ly8vXCIgKyByZXN1bHQuZmlsZW5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3JzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5lcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIGVycm9yID0gcmVzdWx0LmVycm9yc1tpXTtcbiAgICAgICAgICAgICAgaWYgKGVycm9yLmZpbGVuYW1lICYmIGVycm9yLmZpbGVuYW1lLmluZGV4T2YoXCI6XCIpIDw9IDIpIHtcbiAgICAgICAgICAgICAgICBlcnJvci5maWxlbmFtZSA9IFwiZmlsZTovLy9cIiArIGVycm9yLmZpbGVuYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2FybihKU09OLnN0cmluZ2lmeShyZXN1bHQsIHVuZGVmaW5lZCwgMikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHhtbGh0dHAuc2VuZChudWxsKTtcbiAgfTtcbn1cblxub25tZXNzYWdlID0gKHsgZGF0YSB9KSA9PiB7XG4gIGNvbnN0IHsgdG9waWMsIHBheWxvYWQgfSA9IGRhdGE7XG4gIC8vIGNvbnNvbGUubG9nKFwiUmVjaWV2ZWQgbWVzc2FnZSBmcm9tIG1haW4gdGhyZWFkOlwiLCB0b3BpYywgcGF5bG9hZCk7XG5cbiAgc3dpdGNoICh0b3BpYykge1xuICAgIGNhc2UgXCJsb2FkQnJpZGdlQ29uZmlnXCI6IHtcbiAgICAgIGNvbnN0IHsgY29uZmlnLCBidW5kbGUgfSA9IHBheWxvYWQ7XG4gICAgICBfX2ZiQmF0Y2hlZEJyaWRnZUNvbmZpZyA9IGNvbmZpZztcbiAgICAgIGxvYWRCdW5kbGUoYnVuZGxlKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZW5kTWVzc2FnZShcImJ1bmRsZUZpbmlzaGVkTG9hZGluZ1wiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGhhbmRsZUVycm9yKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiY2FsbEZ1bmN0aW9uUmV0dXJuRmx1c2hlZFF1ZXVlXCI6IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzZWxmLl9fZmJCYXRjaGVkQnJpZGdlKSB7XG4gICAgICAgICAgY29uc3QgZmx1c2hlZFF1ZXVlID0gX19mYkJhdGNoZWRCcmlkZ2UuY2FsbEZ1bmN0aW9uUmV0dXJuRmx1c2hlZFF1ZXVlKFxuICAgICAgICAgICAgLi4ucGF5bG9hZFxuICAgICAgICAgICk7XG4gICAgICAgICAgc2VuZE1lc3NhZ2UoXCJmbHVzaGVkUXVldWVcIiwgZmx1c2hlZFF1ZXVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oZSk7XG4gICAgICAgIGNvbnNvbGUud2FybihcInRvcGljXCIsIHRvcGljKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwicGF5bG9hZFwiLCBwYXlsb2FkKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiaW52b2tlQ2FsbGJhY2tBbmRSZXR1cm5GbHVzaGVkUXVldWVcIjoge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHNlbGYuX19mYkJhdGNoZWRCcmlkZ2UpIHtcbiAgICAgICAgICBjb25zdCBmbHVzaGVkUXVldWUgPSBfX2ZiQmF0Y2hlZEJyaWRnZS5pbnZva2VDYWxsYmFja0FuZFJldHVybkZsdXNoZWRRdWV1ZShcbiAgICAgICAgICAgIC4uLnBheWxvYWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHNlbmRNZXNzYWdlKFwiZmx1c2hlZFF1ZXVlXCIsIGZsdXNoZWRRdWV1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ0b3BpY1wiLCB0b3BpYyk7XG4gICAgICAgIGNvbnNvbGUud2FybihcInBheWxvYWRcIiwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcImZsdXNoXCI6IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzZWxmLl9fZmJCYXRjaGVkQnJpZGdlKSB7XG4gICAgICAgICAgY29uc3QgZmx1c2hlZFF1ZXVlID0gX19mYkJhdGNoZWRCcmlkZ2UuZmx1c2hlZFF1ZXVlLmFwcGx5KG51bGwpO1xuICAgICAgICAgIHNlbmRNZXNzYWdlKFwiZmx1c2hlZFF1ZXVlXCIsIGZsdXNoZWRRdWV1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ0b3BpY1wiLCB0b3BpYyk7XG4gICAgICAgIGNvbnNvbGUud2FybihcInBheWxvYWRcIiwgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn07XG4iXX0=