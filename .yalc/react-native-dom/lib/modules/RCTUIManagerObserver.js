Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _RCTBridge=require("./../bridge/RCTBridge");var _fastMemoize=require("fast-memoize");var _fastMemoize2=_interopRequireDefault(_fastMemoize);var _RCTViewManager=require("./../views/RCTViewManager");var _RCTViewManager2=_interopRequireDefault(_RCTViewManager);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTUIManagerObserverCoordinator=function(){function RCTUIManagerObserverCoordinator(){var _this=this;(0,_classCallCheck3.default)(this,RCTUIManagerObserverCoordinator);this.uiManagerWillPerformLayout=function(manager){for(var _iterator=_this.observers,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var observer=_ref;if(typeof observer.uiManagerWillPerformLayout==="function"){observer.uiManagerDidPerformLayout(manager);}}};this.uiManagerDidPerformLayout=function(manager){for(var _iterator2=_this.observers,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var observer=_ref2;if(typeof observer.uiManagerDidPerformLayout==="function"){observer.uiManagerDidPerformLayout(manager);}}};this.uiManagerWillFlushBlocks=function(manager){for(var _iterator3=_this.observers,_isArray3=Array.isArray(_iterator3),_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++];}else{_i3=_iterator3.next();if(_i3.done)break;_ref3=_i3.value;}var observer=_ref3;if(typeof observer.uiManagerWillFlushBlocks==="function"){observer.uiManagerWillFlushBlocks(manager);}}};this.observers=new Set();}(0,_createClass3.default)(RCTUIManagerObserverCoordinator,[{key:"addObserver",value:function addObserver(observer){this.observers.add(observer);}},{key:"removeObserver",value:function removeObserver(observer){this.observers.delete(observer);}}]);return RCTUIManagerObserverCoordinator;}();exports.default=RCTUIManagerObserverCoordinator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1JlYWN0RG9tL21vZHVsZXMvUkNUVUlNYW5hZ2VyT2JzZXJ2ZXIuanMiXSwibmFtZXMiOlsiUkNUVUlNYW5hZ2VyT2JzZXJ2ZXJDb29yZGluYXRvciIsInVpTWFuYWdlcldpbGxQZXJmb3JtTGF5b3V0IiwibWFuYWdlciIsIm9ic2VydmVycyIsIm9ic2VydmVyIiwidWlNYW5hZ2VyRGlkUGVyZm9ybUxheW91dCIsInVpTWFuYWdlcldpbGxGbHVzaEJsb2NrcyIsIlNldCIsImFkZCIsImRlbGV0ZSJdLCJtYXBwaW5ncyI6Im1UQUtBLGdEQUNBLHlDLHVEQUNBLHlELG1KQTZCTUEsZ0MsWUFHSiwwQ0FBYyx3RkFrQmRDLDBCQWxCYyxDQWtCZSxTQUFDQyxPQUFELENBQTJCLENBQ3RELGtCQUFxQixNQUFLQyxTQUExQixvTEFBcUMsdUlBQTVCQyxTQUE0QixNQUNuQyxHQUFJLE1BQU9BLFVBQVNILDBCQUFoQixHQUErQyxVQUFuRCxDQUErRCxDQUU3REcsU0FBU0MseUJBQVQsQ0FBbUNILE9BQW5DLEVBQ0QsQ0FDRixDQUNGLENBekJhLE1BMkJkRyx5QkEzQmMsQ0EyQmMsU0FBQ0gsT0FBRCxDQUEyQixDQUNyRCxtQkFBcUIsTUFBS0MsU0FBMUIsMkxBQXFDLG1KQUE1QkMsU0FBNEIsT0FDbkMsR0FBSSxNQUFPQSxVQUFTQyx5QkFBaEIsR0FBOEMsVUFBbEQsQ0FBOEQsQ0FDNURELFNBQVNDLHlCQUFULENBQW1DSCxPQUFuQyxFQUNELENBQ0YsQ0FDRixDQWpDYSxNQW1DZEksd0JBbkNjLENBbUNhLFNBQUNKLE9BQUQsQ0FBMkIsQ0FDcEQsbUJBQXFCLE1BQUtDLFNBQTFCLDJMQUFxQyxtSkFBNUJDLFNBQTRCLE9BQ25DLEdBQUksTUFBT0EsVUFBU0Usd0JBQWhCLEdBQTZDLFVBQWpELENBQTZELENBQzNERixTQUFTRSx3QkFBVCxDQUFrQ0osT0FBbEMsRUFDRCxDQUNGLENBQ0YsQ0F6Q2EsQ0FDWixLQUFLQyxTQUFMLENBQWlCLEdBQUlJLElBQUosRUFBakIsQ0FDRCxDLHlHQUtXSCxRLENBQWdDLENBQzFDLEtBQUtELFNBQUwsQ0FBZUssR0FBZixDQUFtQkosUUFBbkIsRUFDRCxDLHNEQUtjQSxRLENBQWdDLENBQzdDLEtBQUtELFNBQUwsQ0FBZU0sTUFBZixDQUFzQkwsUUFBdEIsRUFDRCxDLCtEQTRCWUosK0IiLCJmaWxlIjoiUkNUVUlNYW5hZ2VyT2JzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwcm92aWRlc01vZHVsZSBSQ1RVSU1hbmFnZXJPYnNlcnZlckNvb3JkaW5hdG9yXG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCB7IGdldFByb3BlcnR5TmFtZXMgfSBmcm9tIFwiUkNUQnJpZGdlXCI7XG5pbXBvcnQgbWVtb2l6ZSBmcm9tIFwiZmFzdC1tZW1vaXplXCI7XG5pbXBvcnQgUkNUVmlld01hbmFnZXIgZnJvbSBcIlJDVFZpZXdNYW5hZ2VyXCI7XG5cbmltcG9ydCB0eXBlb2YgX1JDVFVJTWFuYWdlciBmcm9tIFwiUkNUVUlNYW5hZ2VyXCI7XG50eXBlIFJDVFVJTWFuYWdlciA9ICRDYWxsPCRhd2FpdDxfUkNUVUlNYW5hZ2VyPj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgUkNUVUlNYW5hZ2VyT2JzZXJ2ZXIge1xuICAvKipcbiAgICogQ2FsbGVkIGp1c3QgYmVmb3JlIHRoZSBVSU1hbmFnZXIgbGF5b3V0IHZpZXdzLlxuICAgKiBJdCBhbGxvd3MgcGVyZm9ybWluZyBzb21lIG9wZXJhdGlvbiBmb3IgY29tcG9uZW50cyB3aGljaCBjb250YWluIGN1c3RvbVxuICAgKiBsYXlvdXQgbG9naWMgcmlnaHQgYmVmb3JlIHJlZ3VsYXIgWW9nYSBiYXNlZCBsYXlvdXQuIFNvLCBmb3IgaW5zdGFuY2UsXG4gICAqIHNvbWUgY29tcG9uZW50cyB3aGljaCBoYXZlIG93biBSZWFjdC1pbmRlcGVuZGVudCBzdGF0ZSBjYW4gY29tcHV0ZSBhbmQgY2FjaGVcbiAgICogb3duIGludHJpbnNpYyBjb250ZW50IHNpemUgKHdoaWNoIHdpbGwgYmUgdXNlZCBieSBZb2dhKSBhdCB0aGlzIHBvaW50LlxuICAgKi9cbiAgdWlNYW5hZ2VyV2lsbFBlcmZvcm1MYXlvdXQ/OiAobWFuYWdlcjogUkNUVUlNYW5hZ2VyKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDYWxsZWQganVzdCBhZnRlciB0aGUgVUlNYW5hZ2VyIGxheW91dCB2aWV3cy5cbiAgICogSXQgYWxsb3dzIHBlcmZvcm1pbmcgY3VzdG9tIGxheW91dCBsb2dpYyByaWdodCBhZnRlciByZWd1bGFyIFlvZ2EgYmFzZWQgbGF5b3V0LlxuICAgKiBTbywgZm9yIGluc3RhbmNlLCB0aGlzIGNhbiBiZSB1c2VkIGZvciBjb21wdXRpbmcgZmluYWwgbGF5b3V0IGZvciBhIGNvbXBvbmVudCxcbiAgICogc2luY2UgaXQgaGFzIGl0cyBmaW5hbCBmcmFtZSBzZXQgYnkgWW9nYSBhdCB0aGlzIHBvaW50LlxuICAgKi9cbiAgdWlNYW5hZ2VyRGlkUGVyZm9ybUxheW91dD86IChtYW5hZ2VyOiBSQ1RVSU1hbmFnZXIpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIENhbGxlZCBiZWZvcmUgZmx1c2hpbmcgVUkgYmxvY2tzIGF0IHRoZSBlbmQgb2YgYSBiYXRjaC5cbiAgICovXG4gIHVpTWFuYWdlcldpbGxGbHVzaEJsb2Nrcz86IChtYW5hZ2VyOiBSQ1RVSU1hbmFnZXIpID0+IHZvaWQ7XG59XG5cbmNsYXNzIFJDVFVJTWFuYWdlck9ic2VydmVyQ29vcmRpbmF0b3IgaW1wbGVtZW50cyBSQ1RVSU1hbmFnZXJPYnNlcnZlciB7XG4gIG9ic2VydmVyczogU2V0PFJDVFVJTWFuYWdlck9ic2VydmVyPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm9ic2VydmVycyA9IG5ldyBTZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBVSU1hbmFnZXJPYnNlcnZlci4gU2VlIHRoZSBgUkNUVUlNYW5hZ2VyT2JzZXJ2ZXJgIGl0ZXJmYWNlIGZvciBtb3JlIGluZm8uXG4gICAqL1xuICBhZGRPYnNlcnZlcihvYnNlcnZlcjogUkNUVUlNYW5hZ2VyT2JzZXJ2ZXIpIHtcbiAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGBVSU1hbmFnZXJPYnNlcnZlcmAuXG4gICAqL1xuICByZW1vdmVPYnNlcnZlcihvYnNlcnZlcjogUkNUVUlNYW5hZ2VyT2JzZXJ2ZXIpIHtcbiAgICB0aGlzLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIpO1xuICB9XG5cbiAgdWlNYW5hZ2VyV2lsbFBlcmZvcm1MYXlvdXQgPSAobWFuYWdlcjogUkNUVUlNYW5hZ2VyKSA9PiB7XG4gICAgZm9yIChsZXQgb2JzZXJ2ZXIgb2YgdGhpcy5vYnNlcnZlcnMpIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIudWlNYW5hZ2VyV2lsbFBlcmZvcm1MYXlvdXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gSSBkb24ndCBrbm93IHdoeSB0aGlzIGZhaWxzIHdoZW4gdGhlIG90aGVyIG1ldGhvZHMgZG9uJ3RcbiAgICAgICAgb2JzZXJ2ZXIudWlNYW5hZ2VyRGlkUGVyZm9ybUxheW91dChtYW5hZ2VyKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdWlNYW5hZ2VyRGlkUGVyZm9ybUxheW91dCA9IChtYW5hZ2VyOiBSQ1RVSU1hbmFnZXIpID0+IHtcbiAgICBmb3IgKGxldCBvYnNlcnZlciBvZiB0aGlzLm9ic2VydmVycykge1xuICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlci51aU1hbmFnZXJEaWRQZXJmb3JtTGF5b3V0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb2JzZXJ2ZXIudWlNYW5hZ2VyRGlkUGVyZm9ybUxheW91dChtYW5hZ2VyKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdWlNYW5hZ2VyV2lsbEZsdXNoQmxvY2tzID0gKG1hbmFnZXI6IFJDVFVJTWFuYWdlcikgPT4ge1xuICAgIGZvciAobGV0IG9ic2VydmVyIG9mIHRoaXMub2JzZXJ2ZXJzKSB7XG4gICAgICBpZiAodHlwZW9mIG9ic2VydmVyLnVpTWFuYWdlcldpbGxGbHVzaEJsb2NrcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9ic2VydmVyLnVpTWFuYWdlcldpbGxGbHVzaEJsb2NrcyhtYW5hZ2VyKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJDVFVJTWFuYWdlck9ic2VydmVyQ29vcmRpbmF0b3I7XG4iXX0=