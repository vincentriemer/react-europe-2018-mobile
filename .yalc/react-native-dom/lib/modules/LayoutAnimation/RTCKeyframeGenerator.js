Object.defineProperty(exports,"__esModule",{value:true});var _bezierEasing=require("bezier-easing");var _bezierEasing2=_interopRequireDefault(_bezierEasing);var _rebound=require("rebound");var _rebound2=_interopRequireDefault(_rebound);var _fastMemoize=require("fast-memoize");var _fastMemoize2=_interopRequireDefault(_fastMemoize);var _Invariant=require("./../../utils/Invariant");var _Invariant2=_interopRequireDefault(_Invariant);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var timestepCoefficient=1;var staticEasingFunctions={linear:function linear(x){return x;},easeIn:(0,_bezierEasing2.default)(0.42,0,1,1),easeOut:(0,_bezierEasing2.default)(0,0,0.58,1),easeInEaseOut:(0,_bezierEasing2.default)(0.42,0,0.58,1)};var springTimestep=16.667*timestepCoefficient;function generateStaticKeyframes(ease,duration,delay){var numSteps=duration/springTimestep;var timestep=1.0/numSteps;var keyframes=[];var currentX=0;for(var i=0;i<numSteps;i++){keyframes.push(ease(currentX));currentX+=timestep;}keyframes.push(1);return{keyframes:keyframes,duration:duration,delay:delay};}var looper=new _rebound2.default.SimulationLooper(springTimestep);var springSystem=new _rebound2.default.SpringSystem(looper);function generateSpringKeyframes(springDamping){var initialVelocity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var delay=arguments[2];var mass=1;var tension=40;var friction=springDamping*(2*Math.sqrt(mass*tension));var springConfig=_rebound2.default.SpringConfig.fromOrigamiTensionAndFriction(tension,friction);var spring=springSystem.createSpringWithConfig(springConfig);var result=[];function readStep(spring){result.push(spring.getCurrentValue());}spring.addListener({onSpringUpdate:readStep});spring._endValue=1.0;spring._currentState.velocity=initialVelocity;springSystem.activateSpring(spring.getId());spring.removeAllListeners();var springDuration=result.length*springTimestep;return{keyframes:result,duration:springDuration,delay:delay};}var generateKeyframes=(0,_fastMemoize2.default)(function(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var duration=arguments[1];var _config$type=config.type,type=_config$type===undefined?"easeInEaseOut":_config$type,springDamping=config.springDamping,initialVelocity=config.initialVelocity,delay=config.delay;var resolvedDelay=delay!=null?delay:0;if(type&&type!=="spring"){var easingFunction=staticEasingFunctions[type];var resolvedDuration=config.duration!=null?config.duration:duration;if(resolvedDuration===0){return null;}return generateStaticKeyframes(easingFunction,resolvedDuration,resolvedDelay);}if(type&&type==="spring"&&springDamping){return generateSpringKeyframes(springDamping,initialVelocity,resolvedDelay);}(0,_Invariant2.default)(false,"Invalid layoutAnimation configuration provided");});exports.default=generateKeyframes;
//# sourceMappingURL=RTCKeyframeGenerator.js.map