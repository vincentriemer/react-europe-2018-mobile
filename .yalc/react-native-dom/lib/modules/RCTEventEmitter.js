Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _dec,_dec2,_desc,_value,_class;var _Invariant=require("./../utils/Invariant");var _Invariant2=_interopRequireDefault(_Invariant);var _RCTBridge=require("./../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);var _NotificationCenter=require("./../base/NotificationCenter");var _NotificationCenter2=_interopRequireDefault(_NotificationCenter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object['ke'+'ys'](descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object['define'+'Property'](target,property,desc);desc=null;}return desc;}var RCTEventEmitter=(_dec=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec2=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),(_class=function(){function RCTEventEmitter(bridge,supportedMethods){(0,_classCallCheck3.default)(this,RCTEventEmitter);this.listenerCount=0;this.bridge=bridge;this._supportedMethods=supportedMethods;}(0,_createClass3.default)(RCTEventEmitter,[{key:"supportedMethods",value:function supportedMethods(){return this._supportedMethods;}},{key:"sendEventWithName",value:function sendEventWithName(eventName,body){(0,_Invariant2.default)(this.bridge,"bridge is not set. This is probably because you've"+("explicitly synthesized the bridge in "+this.constructor.name+", even though it's inherited ")+"from RCTEventEmitter.");if(this.listenerCount>0){this.bridge.enqueueJSCall("RCTDeviceEventEmitter","emit",body?[eventName,body]:[eventName]);_NotificationCenter2.default.emitEvent(eventName,[body]);}else{console.warn("Sending "+eventName+" with no listeners registered");}}},{key:"startObserving",value:function startObserving(){}},{key:"stopObserving",value:function stopObserving(){}},{key:"addListener",value:function addListener(eventName,callback){if(callback!=null){_NotificationCenter2.default.addListener(eventName,callback);}this.listenerCount++;if(this.listenerCount===1){this.startObserving();}}},{key:"removeListener",value:function removeListener(eventName,callback){if(callback!=null){_NotificationCenter2.default.removeListener(eventName,callback);}this.removeListeners(1);}},{key:"removeListeners",value:function removeListeners(count){this.listenerCount=Math.max(this.listenerCount-count,0);if(this.listenerCount===0){this.stopObserving();}}}]);return RCTEventEmitter;}(),(_applyDecoratedDescriptor(_class.prototype,"addListener",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"addListener"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"removeListeners",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"removeListeners"),_class.prototype)),_class));exports.default=RCTEventEmitter;
//# sourceMappingURL=RCTEventEmitter.js.map