Object.defineProperty(exports,"__esModule",{value:true});var _toConsumableArray2=require("babel-runtime/helpers/toConsumableArray");var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_dec11,_dec12,_dec13,_dec14,_dec15,_dec16,_dec17,_class,_desc,_value,_class2;var _Invariant=require("./../../utils/Invariant");var _Invariant2=_interopRequireDefault(_Invariant);var _RCTNativeAnimatedNodesManager=require("./RCTNativeAnimatedNodesManager");var _RCTNativeAnimatedNodesManager2=_interopRequireDefault(_RCTNativeAnimatedNodesManager);var _RCTBridge=require("./../../bridge/RCTBridge");var _RCTEventEmitter2=require("./../RCTEventEmitter");var _RCTEventEmitter3=_interopRequireDefault(_RCTEventEmitter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object['ke'+'ys'](descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object['define'+'Property'](target,property,desc);desc=null;}return desc;}var RCTNativeAnimatedModule=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTNativeAnimatedModule"),_dec2=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec3=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec4=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec5=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec6=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec7=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec8=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec9=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec10=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec11=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec12=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec13=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec14=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec15=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec16=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec17=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec(_class=(_class2=function(_RCTEventEmitter){(0,_inherits3.default)(RCTNativeAnimatedModule,_RCTEventEmitter);function RCTNativeAnimatedModule(bridge){(0,_classCallCheck3.default)(this,RCTNativeAnimatedModule);var _this=(0,_possibleConstructorReturn3.default)(this,(RCTNativeAnimatedModule.__proto__||Object.getPrototypeOf(RCTNativeAnimatedModule)).call(this,bridge));_this.uiManagerWillFlushBlocks=function(uiManager){if(_this.preOperations.length===0&&_this.operations.length===0){return;}var preOperations=[].concat((0,_toConsumableArray3.default)(_this.preOperations));_this.preOperations=[];var operations=[].concat((0,_toConsumableArray3.default)(_this.operations));_this.operations=[];uiManager.prependUIBlock(function(){for(var _iterator=preOperations,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var operation=_ref;operation(_this.nodesManager);}});uiManager.addUIBlock(function(){for(var _iterator2=operations,_isArray2=Array.isArray(_iterator2),_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++];}else{_i2=_iterator2.next();if(_i2.done)break;_ref2=_i2.value;}var operation=_ref2;operation(_this.nodesManager);}_this.nodesManager.updateAnimations();});};_this.bridge=bridge;_this.nodesManager=new _RCTNativeAnimatedNodesManager2.default(_this.bridge.uiManager);_this.operations=[];_this.preOperations=[];_this.bridge.eventDispatcher.addDispatchObserver(_this);_this.bridge.uiManager.observerCoordinator.addObserver(_this);return _this;}(0,_createClass3.default)(RCTNativeAnimatedModule,[{key:"createAnimatedNode",value:function createAnimatedNode(tag,config){this.addOperationBlock(function(nodesManager){nodesManager.createAnimatedNode(tag,config);});}},{key:"connectAnimatedNodes",value:function connectAnimatedNodes(parentTag,childTag){this.addOperationBlock(function(nodesManager){nodesManager.connectAnimatedNodes(parentTag,childTag);});}},{key:"disconnectAnimatedNodes",value:function disconnectAnimatedNodes(parentTag,childTag){this.addOperationBlock(function(nodesManager){nodesManager.disconnectAnimatedNodes(parentTag,childTag);});}},{key:"startAnimatingNode",value:function startAnimatingNode(animationId,nodeTag,config,endCallbackId){var endCallback=this.bridge.callbackFromId(endCallbackId);this.addOperationBlock(function(nodesManager){nodesManager.startAnimatingNode(animationId,nodeTag,config,endCallback);});}},{key:"stopAnimation",value:function stopAnimation(animationId){this.addOperationBlock(function(nodesManager){nodesManager.stopAnimation(animationId);});}},{key:"setAnimatedNodeValue",value:function setAnimatedNodeValue(nodeTag,value){this.addOperationBlock(function(nodesManager){nodesManager.setAnimatedNodeValue(nodeTag,value);});}},{key:"setAnimatedNodeOffset",value:function setAnimatedNodeOffset(nodeTag,offset){this.addOperationBlock(function(nodesManager){nodesManager.setAnimatedNodeOffset(nodeTag,offset);});}},{key:"flattenAnimatedNodeOffset",value:function flattenAnimatedNodeOffset(nodeTag){this.addOperationBlock(function(nodesManager){nodesManager.flattenAnimatedNodeOffset(nodeTag);});}},{key:"extractAnimatedNodeOffset",value:function extractAnimatedNodeOffset(nodeTag){this.addOperationBlock(function(nodesManager){nodesManager.extractAnimatedNodeOffset(nodeTag);});}},{key:"connectAnimatedNodeToView",value:function connectAnimatedNodeToView(nodeTag,viewTag){var viewName=this.bridge.uiManager.viewNameForReactTag(viewTag);(0,_Invariant2.default)(viewName,"No such viewName for react tag "+viewTag);this.addOperationBlock(function(nodesManager){nodesManager.connectAnimatedNodeToView(nodeTag,viewTag,viewName);});}},{key:"disconnectAnimatedNodeFromView",value:function disconnectAnimatedNodeFromView(nodeTag,viewTag){this.addPreOperationBlock(function(nodesManager){nodesManager.disconnectAnimatedNodeFromView(nodeTag,viewTag);});}},{key:"dropAnimatedNode",value:function dropAnimatedNode(tag){this.addOperationBlock(function(nodesManager){nodesManager.dropAnimatedNode(tag);});}},{key:"startListeningToAnimatedNodeValue",value:function startListeningToAnimatedNodeValue(tag){var _this2=this;var valueObserver=this;this.addOperationBlock(function(nodesManager){_this2.addListener("onAnimatedValueUpdate");nodesManager.startListeningToAnimatedNodeValue(tag,valueObserver);});}},{key:"stopListeningToAnimatedNodeValue",value:function stopListeningToAnimatedNodeValue(tag){var _this3=this;this.addOperationBlock(function(nodesManager){_this3.removeListener("onAnimatedValueUpdate");nodesManager.stopListeningToAnimatedNodeValue(tag);});}},{key:"addAnimatedEventToView",value:function addAnimatedEventToView(viewTag,eventName,eventMapping){this.addOperationBlock(function(nodesManager){nodesManager.addAnimatedEventToView(viewTag,eventName,eventMapping);});}},{key:"removeAnimatedEventFromView",value:function removeAnimatedEventFromView(viewTag,eventName,animatedNodeTag){this.addOperationBlock(function(nodesManager){nodesManager.removeAnimatedEventFromView(viewTag,eventName,animatedNodeTag);});}},{key:"addOperationBlock",value:function addOperationBlock(operation){this.operations.push(operation);}},{key:"addPreOperationBlock",value:function addPreOperationBlock(operation){this.preOperations.push(operation);}},{key:"supportedEvents",value:function supportedEvents(){return["onAnimatedValueUpdate"];}},{key:"animatedNodeDidUpdateValue",value:function animatedNodeDidUpdateValue(node,value){this.sendEventWithName("onAnimatedValueUpdate",{tag:node.nodeTag,value:value});}},{key:"eventDispatcherWillDispatchEvent",value:function eventDispatcherWillDispatchEvent(event){this.nodesManager.handleAnimatedEvent(event);}}]);return RCTNativeAnimatedModule;}(_RCTEventEmitter3.default),(_applyDecoratedDescriptor(_class2.prototype,"createAnimatedNode",[_dec2],Object.getOwnPropertyDescriptor(_class2.prototype,"createAnimatedNode"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"connectAnimatedNodes",[_dec3],Object.getOwnPropertyDescriptor(_class2.prototype,"connectAnimatedNodes"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"disconnectAnimatedNodes",[_dec4],Object.getOwnPropertyDescriptor(_class2.prototype,"disconnectAnimatedNodes"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"startAnimatingNode",[_dec5],Object.getOwnPropertyDescriptor(_class2.prototype,"startAnimatingNode"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"stopAnimation",[_dec6],Object.getOwnPropertyDescriptor(_class2.prototype,"stopAnimation"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setAnimatedNodeValue",[_dec7],Object.getOwnPropertyDescriptor(_class2.prototype,"setAnimatedNodeValue"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"setAnimatedNodeOffset",[_dec8],Object.getOwnPropertyDescriptor(_class2.prototype,"setAnimatedNodeOffset"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"flattenAnimatedNodeOffset",[_dec9],Object.getOwnPropertyDescriptor(_class2.prototype,"flattenAnimatedNodeOffset"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"extractAnimatedNodeOffset",[_dec10],Object.getOwnPropertyDescriptor(_class2.prototype,"extractAnimatedNodeOffset"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"connectAnimatedNodeToView",[_dec11],Object.getOwnPropertyDescriptor(_class2.prototype,"connectAnimatedNodeToView"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"disconnectAnimatedNodeFromView",[_dec12],Object.getOwnPropertyDescriptor(_class2.prototype,"disconnectAnimatedNodeFromView"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"dropAnimatedNode",[_dec13],Object.getOwnPropertyDescriptor(_class2.prototype,"dropAnimatedNode"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"startListeningToAnimatedNodeValue",[_dec14],Object.getOwnPropertyDescriptor(_class2.prototype,"startListeningToAnimatedNodeValue"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"stopListeningToAnimatedNodeValue",[_dec15],Object.getOwnPropertyDescriptor(_class2.prototype,"stopListeningToAnimatedNodeValue"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"addAnimatedEventToView",[_dec16],Object.getOwnPropertyDescriptor(_class2.prototype,"addAnimatedEventToView"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"removeAnimatedEventFromView",[_dec17],Object.getOwnPropertyDescriptor(_class2.prototype,"removeAnimatedEventFromView"),_class2.prototype)),_class2))||_class);exports.default=RCTNativeAnimatedModule;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1JlYWN0RG9tL21vZHVsZXMvTmF0aXZlQW5pbWF0aW9uL1JDVE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmpzIl0sIm5hbWVzIjpbIlJDVE5hdGl2ZUFuaW1hdGVkTW9kdWxlIiwiYnJpZGdlIiwidWlNYW5hZ2VyV2lsbEZsdXNoQmxvY2tzIiwidWlNYW5hZ2VyIiwicHJlT3BlcmF0aW9ucyIsImxlbmd0aCIsIm9wZXJhdGlvbnMiLCJwcmVwZW5kVUlCbG9jayIsIm9wZXJhdGlvbiIsIm5vZGVzTWFuYWdlciIsImFkZFVJQmxvY2siLCJ1cGRhdGVBbmltYXRpb25zIiwiZXZlbnREaXNwYXRjaGVyIiwiYWRkRGlzcGF0Y2hPYnNlcnZlciIsIm9ic2VydmVyQ29vcmRpbmF0b3IiLCJhZGRPYnNlcnZlciIsInRhZyIsImNvbmZpZyIsImFkZE9wZXJhdGlvbkJsb2NrIiwiY3JlYXRlQW5pbWF0ZWROb2RlIiwicGFyZW50VGFnIiwiY2hpbGRUYWciLCJjb25uZWN0QW5pbWF0ZWROb2RlcyIsImRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzIiwiYW5pbWF0aW9uSWQiLCJub2RlVGFnIiwiZW5kQ2FsbGJhY2tJZCIsImVuZENhbGxiYWNrIiwiY2FsbGJhY2tGcm9tSWQiLCJzdGFydEFuaW1hdGluZ05vZGUiLCJzdG9wQW5pbWF0aW9uIiwidmFsdWUiLCJzZXRBbmltYXRlZE5vZGVWYWx1ZSIsIm9mZnNldCIsInNldEFuaW1hdGVkTm9kZU9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0Iiwidmlld1RhZyIsInZpZXdOYW1lIiwidmlld05hbWVGb3JSZWFjdFRhZyIsImNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXciLCJhZGRQcmVPcGVyYXRpb25CbG9jayIsImRpc2Nvbm5lY3RBbmltYXRlZE5vZGVGcm9tVmlldyIsImRyb3BBbmltYXRlZE5vZGUiLCJ2YWx1ZU9ic2VydmVyIiwiYWRkTGlzdGVuZXIiLCJzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiLCJyZW1vdmVMaXN0ZW5lciIsInN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiZXZlbnROYW1lIiwiZXZlbnRNYXBwaW5nIiwiYWRkQW5pbWF0ZWRFdmVudFRvVmlldyIsImFuaW1hdGVkTm9kZVRhZyIsInJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyIsInB1c2giLCJub2RlIiwic2VuZEV2ZW50V2l0aE5hbWUiLCJldmVudCIsImhhbmRsZUFuaW1hdGVkRXZlbnQiXSwibWFwcGluZ3MiOiJ5MkJBU0Esa0QsbURBQ0EsOEUsMkZBQ0EsbURBS0Esc0QsMHlCQU1NQSx3QixPQURMLGlDQUFrQix5QkFBbEIsQyxPQXVCRSxrRSxPQU9BLGtFLE9BT0Esa0UsT0FPQSxrRSxPQWtCQSxrRSxPQU9BLGtFLE9BT0Esa0UsT0FPQSxrRSxRQU9BLGtFLFFBT0Esa0UsUUFTQSxrRSxRQVVBLGtFLFFBT0Esa0UsUUFTQSxrRSxRQVFBLGtFLFFBV0Esa0Usa0hBL0lELGlDQUFZQyxNQUFaLENBQStCLGlOQUN2QkEsTUFEdUIsU0FzSy9CQyx3QkF0SytCLENBc0tKLFNBQUNDLFNBQUQsQ0FBa0IsQ0FDM0MsR0FBSSxNQUFLQyxhQUFMLENBQW1CQyxNQUFuQixHQUE4QixDQUE5QixFQUFtQyxNQUFLQyxVQUFMLENBQWdCRCxNQUFoQixHQUEyQixDQUFsRSxDQUFxRSxDQUNuRSxPQUNELENBRUQsR0FBTUQseURBQW9CLE1BQUtBLGFBQXpCLEVBQU4sQ0FDQSxNQUFLQSxhQUFMLENBQXFCLEVBQXJCLENBQ0EsR0FBTUUsc0RBQWlCLE1BQUtBLFVBQXRCLEVBQU4sQ0FDQSxNQUFLQSxVQUFMLENBQWtCLEVBQWxCLENBRUFILFVBQVVJLGNBQVYsQ0FBeUIsVUFBTSxDQUM3QixrQkFBc0JILGFBQXRCLG9MQUFxQyx1SUFBNUJJLFVBQTRCLE1BQ25DQSxVQUFVLE1BQUtDLFlBQWYsRUFDRCxDQUNGLENBSkQsRUFNQU4sVUFBVU8sVUFBVixDQUFx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cUI5QyxTQUFyQixFQUNELEMsa0VBRW9CQSxTLENBQThCLENBQ2pELEtBQUtKLGFBQUwsQ0FBbUJrRCxJQUFuQixDQUF3QjlDLFNBQXhCLEVBQ0QsQyx5REEwQmlCLENBQ2hCLE1BQU8sQ0FBQyx1QkFBRCxDQUFQLENBQ0QsQyw4RUFFMEIrQyxJLENBQTRCeEIsSyxDQUFlLENBQ3BFLEtBQUt5QixpQkFBTCxDQUF1Qix1QkFBdkIsQ0FBZ0QsQ0FDOUN4QyxJQUFLdUMsS0FBSzlCLE9BRG9DLENBRTlDTSxXQUY4QyxDQUFoRCxFQUlELEMsMEZBRWdDMEIsSyxDQUFpQixDQUNoRCxLQUFLaEQsWUFBTCxDQUFrQmlELG1CQUFsQixDQUFzQ0QsS0FBdEMsRUFDRCxDLDYwRkFHWXpELHVCIiwiZmlsZSI6IlJDVE5hdGl2ZUFuaW1hdGVkTW9kdWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUkNUTmF0aXZlQW5pbWF0ZWRNb2R1bGVcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IHR5cGUgUkNUQnJpZGdlIGZyb20gXCJSQ1RCcmlkZ2VcIjtcbmltcG9ydCB0eXBlIHsgUkNURXZlbnQgfSBmcm9tIFwiUkNURXZlbnREaXNwYXRjaGVyXCI7XG5pbXBvcnQgdHlwZSBSQ1RWYWx1ZUFuaW1hdGVkTm9kZSBmcm9tIFwiUkNUVmFsdWVBbmltYXRlZE5vZGVcIjtcblxuaW1wb3J0IGludmFyaWFudCBmcm9tIFwiSW52YXJpYW50XCI7XG5pbXBvcnQgUkNUTmF0aXZlQW5pbWF0ZWROb2Rlc01hbmFnZXIgZnJvbSBcIlJDVE5hdGl2ZUFuaW1hdGVkTm9kZXNNYW5hZ2VyXCI7XG5pbXBvcnQge1xuICBSQ1RfRVhQT1JUX01PRFVMRSxcbiAgUkNUX0VYUE9SVF9NRVRIT0QsXG4gIFJDVEZ1bmN0aW9uVHlwZU5vcm1hbFxufSBmcm9tIFwiUkNUQnJpZGdlXCI7XG5pbXBvcnQgUkNURXZlbnRFbWl0dGVyIGZyb20gXCJSQ1ROYXRpdmVFdmVudEVtaXR0ZXJcIjtcblxuZXhwb3J0IHR5cGUgQ29uZmlnID0gT2JqZWN0O1xudHlwZSBBbmltYXRlZE9wZXJhdGlvbiA9IChub2Rlc01hbmFnZXI6IFJDVE5hdGl2ZUFuaW1hdGVkTm9kZXNNYW5hZ2VyKSA9PiB2b2lkO1xuXG5AUkNUX0VYUE9SVF9NT0RVTEUoXCJSQ1ROYXRpdmVBbmltYXRlZE1vZHVsZVwiKVxuY2xhc3MgUkNUTmF0aXZlQW5pbWF0ZWRNb2R1bGUgZXh0ZW5kcyBSQ1RFdmVudEVtaXR0ZXIge1xuICBicmlkZ2U6IFJDVEJyaWRnZTtcblxuICBub2Rlc01hbmFnZXI6IFJDVE5hdGl2ZUFuaW1hdGVkTm9kZXNNYW5hZ2VyO1xuICBvcGVyYXRpb25zOiBBbmltYXRlZE9wZXJhdGlvbltdO1xuICBwcmVPcGVyYXRpb25zOiBBbmltYXRlZE9wZXJhdGlvbltdO1xuXG4gIGNvbnN0cnVjdG9yKGJyaWRnZTogUkNUQnJpZGdlKSB7XG4gICAgc3VwZXIoYnJpZGdlKTtcblxuICAgIHRoaXMuYnJpZGdlID0gYnJpZGdlO1xuICAgIHRoaXMubm9kZXNNYW5hZ2VyID0gbmV3IFJDVE5hdGl2ZUFuaW1hdGVkTm9kZXNNYW5hZ2VyKFxuICAgICAgdGhpcy5icmlkZ2UudWlNYW5hZ2VyXG4gICAgKTtcblxuICAgIHRoaXMub3BlcmF0aW9ucyA9IFtdO1xuICAgIHRoaXMucHJlT3BlcmF0aW9ucyA9IFtdO1xuXG4gICAgdGhpcy5icmlkZ2UuZXZlbnREaXNwYXRjaGVyLmFkZERpc3BhdGNoT2JzZXJ2ZXIodGhpcyk7XG4gICAgdGhpcy5icmlkZ2UudWlNYW5hZ2VyLm9ic2VydmVyQ29vcmRpbmF0b3IuYWRkT2JzZXJ2ZXIodGhpcyk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBjcmVhdGVBbmltYXRlZE5vZGUodGFnOiBudW1iZXIsIGNvbmZpZzogQ29uZmlnKSB7XG4gICAgdGhpcy5hZGRPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICBub2Rlc01hbmFnZXIuY3JlYXRlQW5pbWF0ZWROb2RlKHRhZywgY29uZmlnKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIGNvbm5lY3RBbmltYXRlZE5vZGVzKHBhcmVudFRhZzogbnVtYmVyLCBjaGlsZFRhZzogbnVtYmVyKSB7XG4gICAgdGhpcy5hZGRPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICBub2Rlc01hbmFnZXIuY29ubmVjdEFuaW1hdGVkTm9kZXMocGFyZW50VGFnLCBjaGlsZFRhZyk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBkaXNjb25uZWN0QW5pbWF0ZWROb2RlcyhwYXJlbnRUYWc6IG51bWJlciwgY2hpbGRUYWc6IG51bWJlcikge1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLmRpc2Nvbm5lY3RBbmltYXRlZE5vZGVzKHBhcmVudFRhZywgY2hpbGRUYWcpO1xuICAgIH0pO1xuICB9XG5cbiAgQFJDVF9FWFBPUlRfTUVUSE9EKFJDVEZ1bmN0aW9uVHlwZU5vcm1hbClcbiAgc3RhcnRBbmltYXRpbmdOb2RlKFxuICAgIGFuaW1hdGlvbklkOiBudW1iZXIsXG4gICAgbm9kZVRhZzogbnVtYmVyLFxuICAgIGNvbmZpZzogQ29uZmlnLFxuICAgIGVuZENhbGxiYWNrSWQ6IG51bWJlclxuICApIHtcbiAgICBjb25zdCBlbmRDYWxsYmFjayA9IHRoaXMuYnJpZGdlLmNhbGxiYWNrRnJvbUlkKGVuZENhbGxiYWNrSWQpO1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLnN0YXJ0QW5pbWF0aW5nTm9kZShcbiAgICAgICAgYW5pbWF0aW9uSWQsXG4gICAgICAgIG5vZGVUYWcsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgZW5kQ2FsbGJhY2tcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBzdG9wQW5pbWF0aW9uKGFuaW1hdGlvbklkOiBudW1iZXIpIHtcbiAgICB0aGlzLmFkZE9wZXJhdGlvbkJsb2NrKChub2Rlc01hbmFnZXIpID0+IHtcbiAgICAgIG5vZGVzTWFuYWdlci5zdG9wQW5pbWF0aW9uKGFuaW1hdGlvbklkKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIHNldEFuaW1hdGVkTm9kZVZhbHVlKG5vZGVUYWc6IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLnNldEFuaW1hdGVkTm9kZVZhbHVlKG5vZGVUYWcsIHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIHNldEFuaW1hdGVkTm9kZU9mZnNldChub2RlVGFnOiBudW1iZXIsIG9mZnNldDogbnVtYmVyKSB7XG4gICAgdGhpcy5hZGRPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICBub2Rlc01hbmFnZXIuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWcsIG9mZnNldCk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBmbGF0dGVuQW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWc6IG51bWJlcikge1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLmZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBleHRyYWN0QW5pbWF0ZWROb2RlT2Zmc2V0KG5vZGVUYWc6IG51bWJlcikge1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLmV4dHJhY3RBbmltYXRlZE5vZGVPZmZzZXQobm9kZVRhZyk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBjb25uZWN0QW5pbWF0ZWROb2RlVG9WaWV3KG5vZGVUYWc6IG51bWJlciwgdmlld1RhZzogbnVtYmVyKSB7XG4gICAgY29uc3Qgdmlld05hbWUgPSB0aGlzLmJyaWRnZS51aU1hbmFnZXIudmlld05hbWVGb3JSZWFjdFRhZyh2aWV3VGFnKTtcbiAgICBpbnZhcmlhbnQodmlld05hbWUsIGBObyBzdWNoIHZpZXdOYW1lIGZvciByZWFjdCB0YWcgJHt2aWV3VGFnfWApO1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLmNvbm5lY3RBbmltYXRlZE5vZGVUb1ZpZXcobm9kZVRhZywgdmlld1RhZywgdmlld05hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgQFJDVF9FWFBPUlRfTUVUSE9EKFJDVEZ1bmN0aW9uVHlwZU5vcm1hbClcbiAgZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3KG5vZGVUYWc6IG51bWJlciwgdmlld1RhZzogbnVtYmVyKSB7XG4gICAgLy8gRGlzY29ubmVjdGluZyBhIHZpZXcgYWxzbyByZXN0b3JlcyBpdHMgZGVmYXVsdCB2YWx1ZXMgc28gd2UgaGF2ZSB0byBtYWtlXG4gICAgLy8gc3VyZSB0aGlzIGhhcHBlbnMgYmVmb3JlIHZpZXdzIGdldCB1cGRhdGVkIHdpdGggdGhlaXIgbmV3IHByb3BzLiBUaGlzIGlzXG4gICAgLy8gd2h5IHdlIGVucXVldWUgdGhpcyBvbiB0aGUgcHJlLW9wZXJhdGlvbnMgcXVldWUuXG4gICAgdGhpcy5hZGRQcmVPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICBub2Rlc01hbmFnZXIuZGlzY29ubmVjdEFuaW1hdGVkTm9kZUZyb21WaWV3KG5vZGVUYWcsIHZpZXdUYWcpO1xuICAgIH0pO1xuICB9XG5cbiAgQFJDVF9FWFBPUlRfTUVUSE9EKFJDVEZ1bmN0aW9uVHlwZU5vcm1hbClcbiAgZHJvcEFuaW1hdGVkTm9kZSh0YWc6IG51bWJlcikge1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgbm9kZXNNYW5hZ2VyLmRyb3BBbmltYXRlZE5vZGUodGFnKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIHN0YXJ0TGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSh0YWc6IG51bWJlcikge1xuICAgIGNvbnN0IHZhbHVlT2JzZXJ2ZXIgPSB0aGlzO1xuICAgIHRoaXMuYWRkT3BlcmF0aW9uQmxvY2soKG5vZGVzTWFuYWdlcikgPT4ge1xuICAgICAgdGhpcy5hZGRMaXN0ZW5lcihcIm9uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVwiKTtcbiAgICAgIG5vZGVzTWFuYWdlci5zdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUodGFnLCB2YWx1ZU9ic2VydmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIHN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZzogbnVtYmVyKSB7XG4gICAgdGhpcy5hZGRPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKFwib25BbmltYXRlZFZhbHVlVXBkYXRlXCIpO1xuICAgICAgbm9kZXNNYW5hZ2VyLnN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKHRhZyk7XG4gICAgfSk7XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBhZGRBbmltYXRlZEV2ZW50VG9WaWV3KFxuICAgIHZpZXdUYWc6IG51bWJlcixcbiAgICBldmVudE5hbWU6IHN0cmluZyxcbiAgICBldmVudE1hcHBpbmc6IE9iamVjdFxuICApIHtcbiAgICB0aGlzLmFkZE9wZXJhdGlvbkJsb2NrKChub2Rlc01hbmFnZXIpID0+IHtcbiAgICAgIG5vZGVzTWFuYWdlci5hZGRBbmltYXRlZEV2ZW50VG9WaWV3KHZpZXdUYWcsIGV2ZW50TmFtZSwgZXZlbnRNYXBwaW5nKTtcbiAgICB9KTtcbiAgfVxuXG4gIEBSQ1RfRVhQT1JUX01FVEhPRChSQ1RGdW5jdGlvblR5cGVOb3JtYWwpXG4gIHJlbW92ZUFuaW1hdGVkRXZlbnRGcm9tVmlldyhcbiAgICB2aWV3VGFnOiBudW1iZXIsXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXG4gICAgYW5pbWF0ZWROb2RlVGFnOiBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy5hZGRPcGVyYXRpb25CbG9jaygobm9kZXNNYW5hZ2VyKSA9PiB7XG4gICAgICBub2Rlc01hbmFnZXIucmVtb3ZlQW5pbWF0ZWRFdmVudEZyb21WaWV3KFxuICAgICAgICB2aWV3VGFnLFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIGFuaW1hdGVkTm9kZVRhZ1xuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZE9wZXJhdGlvbkJsb2NrKG9wZXJhdGlvbjogQW5pbWF0ZWRPcGVyYXRpb24pIHtcbiAgICB0aGlzLm9wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pO1xuICB9XG5cbiAgYWRkUHJlT3BlcmF0aW9uQmxvY2sob3BlcmF0aW9uOiBBbmltYXRlZE9wZXJhdGlvbikge1xuICAgIHRoaXMucHJlT3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XG4gIH1cblxuICB1aU1hbmFnZXJXaWxsRmx1c2hCbG9ja3MgPSAodWlNYW5hZ2VyOiAqKSA9PiB7XG4gICAgaWYgKHRoaXMucHJlT3BlcmF0aW9ucy5sZW5ndGggPT09IDAgJiYgdGhpcy5vcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByZU9wZXJhdGlvbnMgPSBbLi4udGhpcy5wcmVPcGVyYXRpb25zXTtcbiAgICB0aGlzLnByZU9wZXJhdGlvbnMgPSBbXTtcbiAgICBjb25zdCBvcGVyYXRpb25zID0gWy4uLnRoaXMub3BlcmF0aW9uc107XG4gICAgdGhpcy5vcGVyYXRpb25zID0gW107XG5cbiAgICB1aU1hbmFnZXIucHJlcGVuZFVJQmxvY2soKCkgPT4ge1xuICAgICAgZm9yIChsZXQgb3BlcmF0aW9uIG9mIHByZU9wZXJhdGlvbnMpIHtcbiAgICAgICAgb3BlcmF0aW9uKHRoaXMubm9kZXNNYW5hZ2VyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVpTWFuYWdlci5hZGRVSUJsb2NrKCgpID0+IHtcbiAgICAgIGZvciAobGV0IG9wZXJhdGlvbiBvZiBvcGVyYXRpb25zKSB7XG4gICAgICAgIG9wZXJhdGlvbih0aGlzLm5vZGVzTWFuYWdlcik7XG4gICAgICB9XG4gICAgICB0aGlzLm5vZGVzTWFuYWdlci51cGRhdGVBbmltYXRpb25zKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgc3VwcG9ydGVkRXZlbnRzKCkge1xuICAgIHJldHVybiBbXCJvbkFuaW1hdGVkVmFsdWVVcGRhdGVcIl07XG4gIH1cblxuICBhbmltYXRlZE5vZGVEaWRVcGRhdGVWYWx1ZShub2RlOiBSQ1RWYWx1ZUFuaW1hdGVkTm9kZSwgdmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuc2VuZEV2ZW50V2l0aE5hbWUoXCJvbkFuaW1hdGVkVmFsdWVVcGRhdGVcIiwge1xuICAgICAgdGFnOiBub2RlLm5vZGVUYWcsXG4gICAgICB2YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgZXZlbnREaXNwYXRjaGVyV2lsbERpc3BhdGNoRXZlbnQoZXZlbnQ6IFJDVEV2ZW50KSB7XG4gICAgdGhpcy5ub2Rlc01hbmFnZXIuaGFuZGxlQW5pbWF0ZWRFdmVudChldmVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUkNUTmF0aXZlQW5pbWF0ZWRNb2R1bGU7XG4iXX0=