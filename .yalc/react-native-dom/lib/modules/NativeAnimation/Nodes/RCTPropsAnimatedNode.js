Object.defineProperty(exports,"__esModule",{value:true});var _extends2=require("babel-runtime/helpers/extends");var _extends3=_interopRequireDefault(_extends2);var _slicedToArray2=require("babel-runtime/helpers/slicedToArray");var _slicedToArray3=_interopRequireDefault(_slicedToArray2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _get2=require("babel-runtime/helpers/get");var _get3=_interopRequireDefault(_get2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _RCTAnimatedNode2=require("./RCTAnimatedNode");var _RCTAnimatedNode3=_interopRequireDefault(_RCTAnimatedNode2);var _RCTStyleAnimatedNode=require("./RCTStyleAnimatedNode");var _RCTStyleAnimatedNode2=_interopRequireDefault(_RCTStyleAnimatedNode);var _RCTValueAnimatedNode=require("./RCTValueAnimatedNode");var _RCTValueAnimatedNode2=_interopRequireDefault(_RCTValueAnimatedNode);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTPropsAnimatedNode=function(_RCTAnimatedNode){(0,_inherits3.default)(RCTPropsAnimatedNode,_RCTAnimatedNode);function RCTPropsAnimatedNode(tag,config){(0,_classCallCheck3.default)(this,RCTPropsAnimatedNode);var _this=(0,_possibleConstructorReturn3.default)(this,(RCTPropsAnimatedNode.__proto__||Object.getPrototypeOf(RCTPropsAnimatedNode)).call(this,tag,config));_this.propsDictionary={};return _this;}(0,_createClass3.default)(RCTPropsAnimatedNode,[{key:"connectToView",value:function connectToView(viewTag,viewName,uiManager){this.connectedViewTag=viewTag;this.connectedViewName=viewName;this.uiManager=uiManager;}},{key:"disconnectFromView",value:function disconnectFromView(viewTag){for(var _iterator=Object.keys(this.propsDictionary),_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref=_i.value;}var key=_ref;this.propsDictionary[key]=null;}if(Object.keys(this.propsDictionary).length&&this.connectedViewTag&&this.connectedViewName&&this.uiManager){this.uiManager.synchronouslyUpdateView(this.connectedViewTag,this.connectedViewName,this.propsDictionary);}this.connectedViewTag=null;this.connectedViewName=null;this.uiManager=null;}},{key:"performUpdate",value:function performUpdate(){var _this2=this;(0,_get3.default)(RCTPropsAnimatedNode.prototype.__proto__||Object.getPrototypeOf(RCTPropsAnimatedNode.prototype),"performUpdate",this).call(this);var connectedViewTag=this.connectedViewTag;if(!connectedViewTag){return;}this.parentNodes&&Object.entries(this.parentNodes).forEach(function(_ref2){var _ref3=(0,_slicedToArray3.default)(_ref2,2),parentTag=_ref3[0],parentNode=_ref3[1];if(parentNode instanceof _RCTStyleAnimatedNode2.default){_this2.propsDictionary=(0,_extends3.default)({},_this2.propsDictionary,parentNode.propsDictionary);}else if(parentNode instanceof _RCTValueAnimatedNode2.default){var property=_this2.propertyNameForParentTag(parseInt(parentTag,10));var value=parentNode.value;_this2.propsDictionary[property]=value;}});if(Object.keys(this.propsDictionary).length){if(this.uiManager&&this.connectedViewName&&this.connectedViewTag){this.uiManager.synchronouslyUpdateView(this.connectedViewTag,this.connectedViewName,this.propsDictionary);}}}},{key:"propertyNameForParentTag",value:function propertyNameForParentTag(parentTag){for(var _ref4 in this.config.props){var _ref5=(0,_slicedToArray3.default)(_ref4,2);var property=_ref5[0];var tag=_ref5[1];if(tag===parentTag){return property;}}throw new Error("No tags found in props that match parentTag");}}]);return RCTPropsAnimatedNode;}(_RCTAnimatedNode3.default);exports.default=RCTPropsAnimatedNode;
//# sourceMappingURL=RCTPropsAnimatedNode.js.map