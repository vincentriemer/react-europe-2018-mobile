Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _Invariant=require("./../../../utils/Invariant");var _Invariant2=_interopRequireDefault(_Invariant);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTAnimatedNode=function(){function RCTAnimatedNode(tag,config){(0,_classCallCheck3.default)(this,RCTAnimatedNode);this.nodeTag=tag;this.config=config;}(0,_createClass3.default)(RCTAnimatedNode,[{key:"addChild",value:function addChild(child){if(!this.childNodes){this.childNodes={};}if(child){this.childNodes[child.nodeTag]=child;child.onAttachedToNode(this);}}},{key:"removeChild",value:function removeChild(child){if(!this.childNodes){return;}if(child){delete this.childNodes[child.nodeTag];child.onDetachedFromNode(this);}}},{key:"onAttachedToNode",value:function onAttachedToNode(parent){if(!this.parentNodes){this.parentNodes={};}if(parent){this.parentNodes[parent.nodeTag]=parent;}}},{key:"onDetachedFromNode",value:function onDetachedFromNode(parent){if(!this.parentNodes){return;}if(parent){delete this.parentNodes[parent.nodeTag];}}},{key:"detachNode",value:function detachNode(){var _this=this;if(this.parentNodes){Object.values(this.parentNodes).forEach(function(parent){parent.removeChild(_this);});}if(this.childNodes){Object.values(this.childNodes).forEach(function(child){_this.removeChild(child);});}}},{key:"setNeedsUpdate",value:function setNeedsUpdate(){this.needsUpdate=true;if(this.childNodes){Object.values(this.childNodes).forEach(function(child){child.setNeedsUpdate();});}}},{key:"updateNodeIfNecessary",value:function updateNodeIfNecessary(){if(this.needsUpdate){if(this.parentNodes){Object.values(this.parentNodes).forEach(function(parent){parent.updateNodeIfNecessary();});}this.performUpdate();}}},{key:"performUpdate",value:function performUpdate(){this.needsUpdate=false;}}]);return RCTAnimatedNode;}();exports.default=RCTAnimatedNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL1JlYWN0RG9tL21vZHVsZXMvTmF0aXZlQW5pbWF0aW9uL05vZGVzL1JDVEFuaW1hdGVkTm9kZS5qcyJdLCJuYW1lcyI6WyJSQ1RBbmltYXRlZE5vZGUiLCJ0YWciLCJjb25maWciLCJub2RlVGFnIiwiY2hpbGQiLCJjaGlsZE5vZGVzIiwib25BdHRhY2hlZFRvTm9kZSIsIm9uRGV0YWNoZWRGcm9tTm9kZSIsInBhcmVudCIsInBhcmVudE5vZGVzIiwiT2JqZWN0IiwidmFsdWVzIiwiZm9yRWFjaCIsInJlbW92ZUNoaWxkIiwibmVlZHNVcGRhdGUiLCJzZXROZWVkc1VwZGF0ZSIsInVwZGF0ZU5vZGVJZk5lY2Vzc2FyeSIsInBlcmZvcm1VcGRhdGUiXSwibWFwcGluZ3MiOiJtVEFPQSxxRCx5SUFFTUEsZ0IsWUFRSix5QkFBWUMsR0FBWixDQUF5QkMsTUFBekIsQ0FBeUMsb0RBQ3ZDLEtBQUtDLE9BQUwsQ0FBZUYsR0FBZixDQUNBLEtBQUtDLE1BQUwsQ0FBY0EsTUFBZCxDQUNELEMsbUZBRVFFLEssQ0FBeUIsQ0FDaEMsR0FBSSxDQUFDLEtBQUtDLFVBQVYsQ0FBc0IsQ0FDcEIsS0FBS0EsVUFBTCxDQUFrQixFQUFsQixDQUNELENBQ0QsR0FBSUQsS0FBSixDQUFXLENBQ1QsS0FBS0MsVUFBTCxDQUFnQkQsTUFBTUQsT0FBdEIsRUFBaUNDLEtBQWpDLENBQ0FBLE1BQU1FLGdCQUFOLENBQXVCLElBQXZCLEVBQ0QsQ0FDRixDLGdEQUVXRixLLENBQXdCLENBQ2xDLEdBQUksQ0FBQyxLQUFLQyxVQUFWLENBQXNCLENBQ3BCLE9BQ0QsQ0FDRCxHQUFJRCxLQUFKLENBQVcsQ0FDVCxNQUFPLE1BQUtDLFVBQUwsQ0FBZ0JELE1BQU1ELE9BQXRCLENBQVAsQ0FDQUMsTUFBTUcsa0JBQU4sQ0FBeUIsSUFBekIsRUFDRCxDQUNGLEMsMERBRWdCQyxNLENBQXlCLENBQ3hDLEdBQUksQ0FBQyxLQUFLQyxXQUFWLENBQXVCLENBQ3JCLEtBQUtBLFdBQUwsQ0FBbUIsRUFBbkIsQ0FDRCxDQUNELEdBQUlELE1BQUosQ0FBWSxDQUNWLEtBQUtDLFdBQUwsQ0FBaUJELE9BQU9MLE9BQXhCLEVBQW1DSyxNQUFuQyxDQUNELENBQ0YsQyw4REFFa0JBLE0sQ0FBeUIsQ0FDMUMsR0FBSSxDQUFDLEtBQUtDLFdBQVYsQ0FBdUIsQ0FDckIsT0FDRCxDQUNELEdBQUlELE1BQUosQ0FBWSxDQUNWLE1BQU8sTUFBS0MsV0FBTCxDQUFpQkQsT0FBT0wsT0FBeEIsQ0FBUCxDQUNELENBQ0YsQywrQ0FFWSxnQkFDWCxHQUFJLEtBQUtNLFdBQVQsQ0FBc0IsQ0FDcEJDLE9BQU9DLE1BQVAsQ0FBYyxLQUFLRixXQUFuQixFQUFnQ0csT0FBaEMsQ0FBd0MsU0FBQ0osTUFBRCxDQUFZLENBRWxEQSxPQUFPSyxXQUFQLFFBQ0QsQ0FIRCxFQUlELENBQ0QsR0FBSSxLQUFLUixVQUFULENBQXFCLENBQ25CSyxPQUFPQyxNQUFQLENBQWMsS0FBS04sVUFBbkIsRUFBK0JPLE9BQS9CLENBQXVDLFNBQUNSLEtBQUQsQ0FBVyxDQUVoRCxNQUFLUyxXQUFMLENBQWlCVCxLQUFqQixFQUNELENBSEQsRUFJRCxDQUNGLEMsdURBRWdCLENBQ2YsS0FBS1UsV0FBTCxDQUFtQixJQUFuQixDQUNBLEdBQUksS0FBS1QsVUFBVCxDQUFxQixDQUNuQkssT0FBT0MsTUFBUCxDQUFjLEtBQUtOLFVBQW5CLEVBQStCTyxPQUEvQixDQUF1QyxTQUFDUixLQUFELENBQVcsQ0FFaERBLE1BQU1XLGNBQU4sR0FDRCxDQUhELEVBSUQsQ0FDRixDLHFFQUV1QixDQUN0QixHQUFJLEtBQUtELFdBQVQsQ0FBc0IsQ0FDcEIsR0FBSSxLQUFLTCxXQUFULENBQXNCLENBQ3BCQyxPQUFPQyxNQUFQLENBQWMsS0FBS0YsV0FBbkIsRUFBZ0NHLE9BQWhDLENBQXdDLFNBQUNKLE1BQUQsQ0FBWSxDQUVsREEsT0FBT1EscUJBQVAsR0FDRCxDQUhELEVBSUQsQ0FDRCxLQUFLQyxhQUFMLEdBQ0QsQ0FDRixDLHFEQUVlLENBQ2QsS0FBS0gsV0FBTCxDQUFtQixLQUFuQixDQUlELEMsK0NBR1lkLGUiLCJmaWxlIjoiUkNUQW5pbWF0ZWROb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUkNUQW5pbWF0ZWROb2RlXG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCB0eXBlIHsgQ29uZmlnIH0gZnJvbSBcIlJDVE5hdGl2ZUFuaW1hdGVkTW9kdWxlXCI7XG5cbmltcG9ydCBpbnZhcmlhbnQgZnJvbSBcIkludmFyaWFudFwiO1xuXG5jbGFzcyBSQ1RBbmltYXRlZE5vZGUge1xuICBub2RlVGFnOiBudW1iZXI7XG4gIG5lZWRzVXBkYXRlOiBib29sZWFuO1xuICBjb25maWc6IENvbmZpZztcblxuICBjaGlsZE5vZGVzOiA/eyBbbm9kZVRhZzogbnVtYmVyXTogUkNUQW5pbWF0ZWROb2RlIH07XG4gIHBhcmVudE5vZGVzOiA/eyBbbm9kZVRhZzogbnVtYmVyXTogUkNUQW5pbWF0ZWROb2RlIH07XG5cbiAgY29uc3RydWN0b3IodGFnOiBudW1iZXIsIGNvbmZpZzogQ29uZmlnKSB7XG4gICAgdGhpcy5ub2RlVGFnID0gdGFnO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgYWRkQ2hpbGQoY2hpbGQ6ID9SQ1RBbmltYXRlZE5vZGUpIHtcbiAgICBpZiAoIXRoaXMuY2hpbGROb2Rlcykge1xuICAgICAgdGhpcy5jaGlsZE5vZGVzID0ge307XG4gICAgfVxuICAgIGlmIChjaGlsZCkge1xuICAgICAgdGhpcy5jaGlsZE5vZGVzW2NoaWxkLm5vZGVUYWddID0gY2hpbGQ7XG4gICAgICBjaGlsZC5vbkF0dGFjaGVkVG9Ob2RlKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUNoaWxkKGNoaWxkOiBSQ1RBbmltYXRlZE5vZGUpIHtcbiAgICBpZiAoIXRoaXMuY2hpbGROb2Rlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmNoaWxkTm9kZXNbY2hpbGQubm9kZVRhZ107XG4gICAgICBjaGlsZC5vbkRldGFjaGVkRnJvbU5vZGUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgb25BdHRhY2hlZFRvTm9kZShwYXJlbnQ6IFJDVEFuaW1hdGVkTm9kZSkge1xuICAgIGlmICghdGhpcy5wYXJlbnROb2Rlcykge1xuICAgICAgdGhpcy5wYXJlbnROb2RlcyA9IHt9O1xuICAgIH1cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICB0aGlzLnBhcmVudE5vZGVzW3BhcmVudC5ub2RlVGFnXSA9IHBhcmVudDtcbiAgICB9XG4gIH1cblxuICBvbkRldGFjaGVkRnJvbU5vZGUocGFyZW50OiBSQ1RBbmltYXRlZE5vZGUpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50Tm9kZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgZGVsZXRlIHRoaXMucGFyZW50Tm9kZXNbcGFyZW50Lm5vZGVUYWddO1xuICAgIH1cbiAgfVxuXG4gIGRldGFjaE5vZGUoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50Tm9kZXMpIHtcbiAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wYXJlbnROb2RlcykuZm9yRWFjaCgocGFyZW50KSA9PiB7XG4gICAgICAgIC8vICRGbG93Rml4TWUgLSBGbG93IGNvbnNpZGVycyB0aGUgcmV0dXJuIGZvciBPYmplY3QudmFsdWVzIHRvIGJlIEFycmF5PG1peGVkPlxuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hpbGROb2Rlcykge1xuICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmNoaWxkTm9kZXMpLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgIC8vICRGbG93Rml4TWUgLSBGbG93IGNvbnNpZGVycyB0aGUgcmV0dXJuIGZvciBPYmplY3QudmFsdWVzIHRvIGJlIEFycmF5PG1peGVkPlxuICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNldE5lZWRzVXBkYXRlKCkge1xuICAgIHRoaXMubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIGlmICh0aGlzLmNoaWxkTm9kZXMpIHtcbiAgICAgIE9iamVjdC52YWx1ZXModGhpcy5jaGlsZE5vZGVzKS5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gRmxvdyBjb25zaWRlcnMgdGhlIHJldHVybiBmb3IgT2JqZWN0LnZhbHVlcyB0byBiZSBBcnJheTxtaXhlZD5cbiAgICAgICAgY2hpbGQuc2V0TmVlZHNVcGRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU5vZGVJZk5lY2Vzc2FyeSgpIHtcbiAgICBpZiAodGhpcy5uZWVkc1VwZGF0ZSkge1xuICAgICAgaWYgKHRoaXMucGFyZW50Tm9kZXMpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnBhcmVudE5vZGVzKS5mb3JFYWNoKChwYXJlbnQpID0+IHtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gRmxvdyBjb25zaWRlcnMgdGhlIHJldHVybiBmb3IgT2JqZWN0LnZhbHVlcyB0byBiZSBBcnJheTxtaXhlZD5cbiAgICAgICAgICBwYXJlbnQudXBkYXRlTm9kZUlmTmVjZXNzYXJ5KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5wZXJmb3JtVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcGVyZm9ybVVwZGF0ZSgpIHtcbiAgICB0aGlzLm5lZWRzVXBkYXRlID0gZmFsc2U7XG4gICAgLy8gVG8gYmUgb3ZlcmlkZGVuIGJ5IHN1YmNsYXNzZXNcbiAgICAvLyBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gYSBub2RlIG9ubHkgaWYgaXQgaGFzIGJlZW4gbWFya2VkIGZvciB1cGRhdGVcbiAgICAvLyBkdXJpbmcgdGhlIGN1cnJlbnQgdXBkYXRlIGxvb3BcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSQ1RBbmltYXRlZE5vZGU7XG4iXX0=