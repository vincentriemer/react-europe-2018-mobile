Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _get2=require("babel-runtime/helpers/get");var _get3=_interopRequireDefault(_get2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _RCTValueAnimatedNode2=require("./RCTValueAnimatedNode");var _RCTValueAnimatedNode3=_interopRequireDefault(_RCTValueAnimatedNode2);var _Invariant=require("./../../../utils/Invariant");var _Invariant2=_interopRequireDefault(_Invariant);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTDiffClampAnimatedNode=function(_RCTValueAnimatedNode){(0,_inherits3.default)(RCTDiffClampAnimatedNode,_RCTValueAnimatedNode);function RCTDiffClampAnimatedNode(tag,config){(0,_classCallCheck3.default)(this,RCTDiffClampAnimatedNode);var _this=(0,_possibleConstructorReturn3.default)(this,(RCTDiffClampAnimatedNode.__proto__||Object.getPrototypeOf(RCTDiffClampAnimatedNode)).call(this,tag,config));_this.inputNodeTag=config.input;_this.min=config.min;_this.max=config.max;return _this;}(0,_createClass3.default)(RCTDiffClampAnimatedNode,[{key:"onAttachedToNode",value:function onAttachedToNode(parent){(0,_get3.default)(RCTDiffClampAnimatedNode.prototype.__proto__||Object.getPrototypeOf(RCTDiffClampAnimatedNode.prototype),"onAttachedToNode",this).call(this,parent);this.value=this.lastValue=this.inputNodeValue;}},{key:"performUpdate",value:function performUpdate(){(0,_get3.default)(RCTDiffClampAnimatedNode.prototype.__proto__||Object.getPrototypeOf(RCTDiffClampAnimatedNode.prototype),"performUpdate",this).call(this);var lastValue=this.lastValue?this.lastValue:0;var value=this.inputNodeValue;var diff=value-lastValue;this.lastValue=value;this.value=Math.min(Math.max(this.value+diff,this.min),this.max);}},{key:"inputNodeValue",get:function get(){(0,_Invariant2.default)(this.parentNodes,"diffClamp node has no parents");var inputNode=this.parentNodes[this.inputNodeTag];if(!(inputNode instanceof _RCTValueAnimatedNode3.default)){console.error("Illegal node ID set as an input for Animated.DiffClamp node");return 0;}return inputNode.value;}}]);return RCTDiffClampAnimatedNode;}(_RCTValueAnimatedNode3.default);exports.default=RCTDiffClampAnimatedNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL1JlYWN0RG9tL21vZHVsZXMvTmF0aXZlQW5pbWF0aW9uL05vZGVzL1JDVERpZmZDbGFtcEFuaW1hdGVkTm9kZS5qcyJdLCJuYW1lcyI6WyJSQ1REaWZmQ2xhbXBBbmltYXRlZE5vZGUiLCJ0YWciLCJjb25maWciLCJpbnB1dE5vZGVUYWciLCJpbnB1dCIsIm1pbiIsIm1heCIsInBhcmVudCIsInZhbHVlIiwibGFzdFZhbHVlIiwiaW5wdXROb2RlVmFsdWUiLCJkaWZmIiwiTWF0aCIsInBhcmVudE5vZGVzIiwiaW5wdXROb2RlIiwiY29uc29sZSIsImVycm9yIl0sIm1hcHBpbmdzIjoib3FCQU1BLDZELDBFQUNBLHFELHlJQUVNQSx5Qix3R0FNSixrQ0FBWUMsR0FBWixDQUF5QkMsTUFBekIsQ0FBeUMsb05BQ2pDRCxHQURpQyxDQUM1QkMsTUFENEIsR0FFdkMsTUFBS0MsWUFBTCxDQUFvQkQsT0FBT0UsS0FBM0IsQ0FDQSxNQUFLQyxHQUFMLENBQVdILE9BQU9HLEdBQWxCLENBQ0EsTUFBS0MsR0FBTCxDQUFXSixPQUFPSSxHQUFsQixDQUp1QyxhQUt4QyxDLDRHQUVnQkMsTSxDQUF5QixDQUN4Qyw2SkFBdUJBLE1BQXZCLEVBQ0EsS0FBS0MsS0FBTCxDQUFhLEtBQUtDLFNBQUwsQ0FBaUIsS0FBS0MsY0FBbkMsQ0FDRCxDLHFEQUVlLENBQ2QsMkpBRUEsR0FBTUQsV0FBWSxLQUFLQSxTQUFMLENBQWlCLEtBQUtBLFNBQXRCLENBQWtDLENBQXBELENBQ0EsR0FBTUQsT0FBUSxLQUFLRSxjQUFuQixDQUVBLEdBQU1DLE1BQU9ILE1BQVFDLFNBQXJCLENBQ0EsS0FBS0EsU0FBTCxDQUFpQkQsS0FBakIsQ0FDQSxLQUFLQSxLQUFMLENBQWFJLEtBQUtQLEdBQUwsQ0FBU08sS0FBS04sR0FBTCxDQUFTLEtBQUtFLEtBQUwsQ0FBYUcsSUFBdEIsQ0FBNEIsS0FBS04sR0FBakMsQ0FBVCxDQUFnRCxLQUFLQyxHQUFyRCxDQUFiLENBQ0QsQywwQ0FFNEIsQ0FDM0Isd0JBQVUsS0FBS08sV0FBZixrQ0FDQSxHQUFNQyxXQUFZLEtBQUtELFdBQUwsQ0FBaUIsS0FBS1YsWUFBdEIsQ0FBbEIsQ0FDQSxHQUFJLEVBQUVXLG1EQUFGLENBQUosQ0FBa0QsQ0FDaERDLFFBQVFDLEtBQVIsQ0FDRSw2REFERixFQUdBLE1BQU8sRUFBUCxDQUNELENBQ0QsTUFBT0YsV0FBVU4sS0FBakIsQ0FDRCxDLHNGQUdZUix3QiIsImZpbGUiOiJSQ1REaWZmQ2xhbXBBbmltYXRlZE5vZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwcm92aWRlc01vZHVsZSBSQ1REaWZmQ2xhbXBBbmltYXRlZE5vZGVcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IHR5cGUgUkNUQW5pbWF0ZWROb2RlIGZyb20gXCJSQ1RBbmltYXRlZE5vZGVcIjtcbmltcG9ydCBSQ1RWYWx1ZUFuaW1hdGVkTm9kZSBmcm9tIFwiUkNUVmFsdWVBbmltYXRlZE5vZGVcIjtcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSBcIkludmFyaWFudFwiO1xuXG5jbGFzcyBSQ1REaWZmQ2xhbXBBbmltYXRlZE5vZGUgZXh0ZW5kcyBSQ1RWYWx1ZUFuaW1hdGVkTm9kZSB7XG4gIGlucHV0Tm9kZVRhZzogbnVtYmVyO1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG4gIGxhc3RWYWx1ZTogP251bWJlcjtcblxuICBjb25zdHJ1Y3Rvcih0YWc6IG51bWJlciwgY29uZmlnOiBPYmplY3QpIHtcbiAgICBzdXBlcih0YWcsIGNvbmZpZyk7XG4gICAgdGhpcy5pbnB1dE5vZGVUYWcgPSBjb25maWcuaW5wdXQ7XG4gICAgdGhpcy5taW4gPSBjb25maWcubWluO1xuICAgIHRoaXMubWF4ID0gY29uZmlnLm1heDtcbiAgfVxuXG4gIG9uQXR0YWNoZWRUb05vZGUocGFyZW50OiBSQ1RBbmltYXRlZE5vZGUpIHtcbiAgICBzdXBlci5vbkF0dGFjaGVkVG9Ob2RlKHBhcmVudCk7XG4gICAgdGhpcy52YWx1ZSA9IHRoaXMubGFzdFZhbHVlID0gdGhpcy5pbnB1dE5vZGVWYWx1ZTtcbiAgfVxuXG4gIHBlcmZvcm1VcGRhdGUoKSB7XG4gICAgc3VwZXIucGVyZm9ybVVwZGF0ZSgpO1xuXG4gICAgY29uc3QgbGFzdFZhbHVlID0gdGhpcy5sYXN0VmFsdWUgPyB0aGlzLmxhc3RWYWx1ZSA6IDA7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmlucHV0Tm9kZVZhbHVlO1xuXG4gICAgY29uc3QgZGlmZiA9IHZhbHVlIC0gbGFzdFZhbHVlO1xuICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy52YWx1ZSA9IE1hdGgubWluKE1hdGgubWF4KHRoaXMudmFsdWUgKyBkaWZmLCB0aGlzLm1pbiksIHRoaXMubWF4KTtcbiAgfVxuXG4gIGdldCBpbnB1dE5vZGVWYWx1ZSgpOiBudW1iZXIge1xuICAgIGludmFyaWFudCh0aGlzLnBhcmVudE5vZGVzLCBgZGlmZkNsYW1wIG5vZGUgaGFzIG5vIHBhcmVudHNgKTtcbiAgICBjb25zdCBpbnB1dE5vZGUgPSB0aGlzLnBhcmVudE5vZGVzW3RoaXMuaW5wdXROb2RlVGFnXTtcbiAgICBpZiAoIShpbnB1dE5vZGUgaW5zdGFuY2VvZiBSQ1RWYWx1ZUFuaW1hdGVkTm9kZSkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiSWxsZWdhbCBub2RlIElEIHNldCBhcyBhbiBpbnB1dCBmb3IgQW5pbWF0ZWQuRGlmZkNsYW1wIG5vZGVcIlxuICAgICAgKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXROb2RlLnZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJDVERpZmZDbGFtcEFuaW1hdGVkTm9kZTtcbiJdfQ==