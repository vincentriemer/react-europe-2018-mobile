{"version":3,"sources":["../../ReactDom/modules/RCTAppState.js"],"names":["hidden","visibilityChange","document","msHidden","webkitHidden","RCTAppState","didUpdateVisibility","bridge","uiManager","requestTick","sendEventWithName","app_state","currentBackgroundState","addEventListener","removeEventListener","initialAppState","callbackId","callbackFromId"],"mappings":"wnBAKA,gD,mDAKA,mD,uyBAEA,GAAIA,cAAJ,CAAYC,uBAAZ,CACA,GAAI,MAAOC,UAASF,MAAhB,GAA2B,WAA/B,CAA4C,CAE1CA,OAAS,QAAT,CACAC,iBAAmB,kBAAnB,CACD,CAJD,IAIO,IAAI,MAAOC,UAASC,QAAhB,GAA6B,WAAjC,CAA8C,CACnDH,OAAS,UAAT,CACAC,iBAAmB,oBAAnB,CACD,CAHM,IAGA,IAAI,MAAOC,UAASE,YAAhB,GAAiC,WAArC,CAAkD,CACvDJ,OAAS,cAAT,CACAC,iBAAmB,wBAAnB,CACD,C,GAGKI,Y,OADL,iCAAkB,aAAlB,C,OA8CE,kE,yeAPDC,mB,CAAsB,UAAM,CAC1B,MAAKC,MAAL,CAAYC,SAAZ,CAAsBC,WAAtB,GACA,MAAKC,iBAAL,CAAuB,mBAAvB,CAA4C,CAC1CC,UAAW,MAAKC,sBAAL,EAD+B,CAA5C,EAGD,C,yJA1CgB,CACfV,SAASW,gBAAT,CACEZ,gBADF,CAEE,KAAKK,mBAFP,CAGE,KAHF,EAKD,C,qDAEe,CACdJ,SAASY,mBAAT,CACEb,gBADF,CAEE,KAAKK,mBAFP,CAGE,KAHF,EAKD,C,uEAEwB,CAEvB,GAAIJ,SAASF,MAAT,GAAoB,IAAxB,CAA8B,CAC5B,MAAO,SAAP,CACD,CACD,GAAIE,SAASF,MAAT,CAAJ,CAAsB,CACpB,MAAO,YAAP,CACD,CACD,MAAO,QAAP,CACD,C,6DAEmB,CAClB,MAAO,CACLe,gBAAiB,KAAKH,sBAAL,EADZ,CAAP,CAGD,C,yDAEiB,CAChB,MAAO,CAAC,mBAAD,CAAP,CACD,C,8DAUkBI,U,CAAoB,CACrC,KAAKT,MAAL,CAAYU,cAAZ,CAA2BD,UAA3B,EAAuC,CACrCL,UAAW,KAAKC,sBAAL,EAD0B,CAAvC,EAGD,C,6PAGYP,W","file":"RCTAppState.js","sourcesContent":["/**\n * @providesModule RCTAppState\n * @flow\n */\n\nimport RCTBridge, {\n  RCT_EXPORT_MODULE,\n  RCT_EXPORT_METHOD,\n  RCTFunctionTypeNormal\n} from \"RCTBridge\";\nimport RCTEventEmitter from \"RCTNativeEventEmitter\";\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== \"undefined\") {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = \"hidden\";\n  visibilityChange = \"visibilitychange\";\n} else if (typeof document.msHidden !== \"undefined\") {\n  hidden = \"msHidden\";\n  visibilityChange = \"msvisibilitychange\";\n} else if (typeof document.webkitHidden !== \"undefined\") {\n  hidden = \"webkitHidden\";\n  visibilityChange = \"webkitvisibilitychange\";\n}\n\n@RCT_EXPORT_MODULE(\"RCTAppState\")\nclass RCTAppState extends RCTEventEmitter {\n  startObserving() {\n    document.addEventListener(\n      visibilityChange,\n      this.didUpdateVisibility,\n      false\n    );\n  }\n\n  stopObserving() {\n    document.removeEventListener(\n      visibilityChange,\n      this.didUpdateVisibility,\n      false\n    );\n  }\n\n  currentBackgroundState() {\n    // $FlowFixMe\n    if (document[hidden] == null) {\n      return \"unknown\";\n    }\n    if (document[hidden]) {\n      return \"background\";\n    }\n    return \"active\";\n  }\n\n  constantsToExport() {\n    return {\n      initialAppState: this.currentBackgroundState()\n    };\n  }\n\n  supportedEvents() {\n    return [\"appStateDidChange\"];\n  }\n\n  didUpdateVisibility = () => {\n    this.bridge.uiManager.requestTick();\n    this.sendEventWithName(\"appStateDidChange\", {\n      app_state: this.currentBackgroundState()\n    });\n  };\n\n  @RCT_EXPORT_METHOD(RCTFunctionTypeNormal)\n  getCurrentAppState(callbackId: number) {\n    this.bridge.callbackFromId(callbackId)({\n      app_state: this.currentBackgroundState()\n    });\n  }\n}\n\nexport default RCTAppState;\n"]}