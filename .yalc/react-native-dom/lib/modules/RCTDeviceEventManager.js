Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _dec,_dec2,_class,_desc,_value,_class2;var _RCTBridge=require("./../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object['ke'+'ys'](descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object['define'+'Property'](target,property,desc);desc=null;}return desc;}var RCTDeviceEventManager=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTDeviceEventManager"),_dec2=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec(_class=(_class2=function(){function RCTDeviceEventManager(bridge){(0,_classCallCheck3.default)(this,RCTDeviceEventManager);this.shouldBlockHistory=true;this.dispatcher=bridge.eventDispatcher;this.setupBackHandler();}(0,_createClass3.default)(RCTDeviceEventManager,[{key:"setupBackHandler",value:function setupBackHandler(){var _this=this;if(typeof history.pushState==="function"){history.pushState("BackHandler",null,null);window.onpopstate=function(){if(_this.shouldBlockHistory){history.pushState("BackHandler",null,null);_this.dispatcher.sendDeviceEvent("hardwareBackPress");}};}}},{key:"invokeDefaultBackPressHandler",value:function invokeDefaultBackPressHandler(){this.shouldBlockHistory=false;window.history.go(-2);}}]);return RCTDeviceEventManager;}(),(_applyDecoratedDescriptor(_class2.prototype,"invokeDefaultBackPressHandler",[_dec2],Object.getOwnPropertyDescriptor(_class2.prototype,"invokeDefaultBackPressHandler"),_class2.prototype)),_class2))||_class);exports.default=RCTDeviceEventManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1JlYWN0RG9tL21vZHVsZXMvUkNURGV2aWNlRXZlbnRNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIlJDVERldmljZUV2ZW50TWFuYWdlciIsImJyaWRnZSIsInNob3VsZEJsb2NrSGlzdG9yeSIsImRpc3BhdGNoZXIiLCJldmVudERpc3BhdGNoZXIiLCJzZXR1cEJhY2tIYW5kbGVyIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsIndpbmRvdyIsIm9ucG9wc3RhdGUiLCJzZW5kRGV2aWNlRXZlbnQiLCJnbyJdLCJtYXBwaW5ncyI6IndYQUtBLGdELDZ4QkFTcUJBLHNCLE9BRHBCLGlDQUFrQix1QkFBbEIsQyxPQXlCRSxrRSxpQ0FwQkQsK0JBQVlDLE1BQVosQ0FBK0IsK0RBRi9CQyxrQkFFK0IsQ0FGVixJQUVVLENBQzdCLEtBQUtDLFVBQUwsQ0FBa0JGLE9BQU9HLGVBQXpCLENBQ0EsS0FBS0MsZ0JBQUwsR0FDRCxDLDBHQUVrQixnQkFDakIsR0FBSSxNQUFPQyxTQUFRQyxTQUFmLEdBQTZCLFVBQWpDLENBQTZDLENBRTNDRCxRQUFRQyxTQUFSLENBQWtCLGFBQWxCLENBQWlDLElBQWpDLENBQXVDLElBQXZDLEVBRUFDLE9BQU9DLFVBQVAsQ0FBb0IsVUFBTSxDQUN4QixHQUFJLE1BQUtQLGtCQUFULENBQTZCLENBRTNCSSxRQUFRQyxTQUFSLENBQWtCLGFBQWxCLENBQWlDLElBQWpDLENBQXVDLElBQXZDLEVBQ0EsTUFBS0osVUFBTCxDQUFnQk8sZUFBaEIsQ0FBZ0MsbUJBQWhDLEVBQ0QsQ0FDRixDQU5ELENBT0QsQ0FDRixDLHFGQUcrQixDQUM5QixLQUFLUixrQkFBTCxDQUEwQixLQUExQixDQUNBTSxPQUFPRixPQUFQLENBQWVLLEVBQWYsQ0FBa0IsQ0FBQyxDQUFuQixFQUNELEMsb1FBNUJrQlgscUIiLCJmaWxlIjoiUkNURGV2aWNlRXZlbnRNYW5hZ2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUkNURGV2aWNlRXZlbnRNYW5hZ2VyXG4gKiBAZmxvd1xuICovXG5cbmltcG9ydCBSQ1RCcmlkZ2UsIHtcbiAgUkNUX0VYUE9SVF9NT0RVTEUsXG4gIFJDVF9FWFBPUlRfTUVUSE9ELFxuICBSQ1RGdW5jdGlvblR5cGVOb3JtYWxcbn0gZnJvbSBcIlJDVEJyaWRnZVwiO1xuXG5pbXBvcnQgdHlwZSBSQ1RFdmVudERpc3BhdGNoZXIgZnJvbSBcIlJDVEV2ZW50RGlzcGF0Y2hlclwiO1xuXG5AUkNUX0VYUE9SVF9NT0RVTEUoXCJSQ1REZXZpY2VFdmVudE1hbmFnZXJcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJDVERldmljZUV2ZW50TWFuYWdlciB7XG4gIGRpc3BhdGNoZXI6IFJDVEV2ZW50RGlzcGF0Y2hlcjtcbiAgc2hvdWxkQmxvY2tIaXN0b3J5ID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihicmlkZ2U6IFJDVEJyaWRnZSkge1xuICAgIHRoaXMuZGlzcGF0Y2hlciA9IGJyaWRnZS5ldmVudERpc3BhdGNoZXI7XG4gICAgdGhpcy5zZXR1cEJhY2tIYW5kbGVyKCk7XG4gIH1cblxuICBzZXR1cEJhY2tIYW5kbGVyKCkge1xuICAgIGlmICh0eXBlb2YgaGlzdG9yeS5wdXNoU3RhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoXCJCYWNrSGFuZGxlclwiLCBudWxsLCBudWxsKTtcblxuICAgICAgd2luZG93Lm9ucG9wc3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZEJsb2NrSGlzdG9yeSkge1xuICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShcIkJhY2tIYW5kbGVyXCIsIG51bGwsIG51bGwpO1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hlci5zZW5kRGV2aWNlRXZlbnQoXCJoYXJkd2FyZUJhY2tQcmVzc1wiKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBAUkNUX0VYUE9SVF9NRVRIT0QoUkNURnVuY3Rpb25UeXBlTm9ybWFsKVxuICBpbnZva2VEZWZhdWx0QmFja1ByZXNzSGFuZGxlcigpIHtcbiAgICB0aGlzLnNob3VsZEJsb2NrSGlzdG9yeSA9IGZhbHNlO1xuICAgIHdpbmRvdy5oaXN0b3J5LmdvKC0yKTtcbiAgfVxufVxuIl19