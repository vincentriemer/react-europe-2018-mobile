Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _dec,_class;var _RCTBridge=require("./../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);var _RCTEventEmitter2=require("./RCTEventEmitter");var _RCTEventEmitter3=_interopRequireDefault(_RCTEventEmitter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTDeviceInfo=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTDeviceInfo"),_dec(_class=function(_RCTEventEmitter){(0,_inherits3.default)(RCTDeviceInfo,_RCTEventEmitter);function RCTDeviceInfo(bridge){(0,_classCallCheck3.default)(this,RCTDeviceInfo);var _this=(0,_possibleConstructorReturn3.default)(this,(RCTDeviceInfo.__proto__||Object.getPrototypeOf(RCTDeviceInfo)).call(this,bridge));window.addEventListener("resize",_this.didUpdateDimensions.bind(_this),false);window.matchMedia("screen and (min-resolution: 2dppx)").addListener(_this.didUpdateDimensions.bind(_this));_this.listenerCount=1;return _this;}(0,_createClass3.default)(RCTDeviceInfo,[{key:"constantsToExport",value:function constantsToExport(){return{Dimensions:this.exportedDimensions()};}},{key:"supportedEvents",value:function supportedEvents(){return["didUpdateDimensions"];}},{key:"exportedDimensions",value:function exportedDimensions(){var dims={width:Math.ceil(window.innerWidth),height:Math.ceil(window.innerHeight),scale:this.getDevicePixelRatio(),fontScale:1};return{window:dims,screen:dims};}},{key:"getDevicePixelRatio",value:function getDevicePixelRatio(){var ratio=1;if(window.screen.systemXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.systemXDPI>window.screen.logicalXDPI){ratio=window.screen.systemXDPI/window.screen.logicalXDPI;}else if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio;}return Math.min(ratio,2);}},{key:"didUpdateDimensions",value:function didUpdateDimensions(){this.sendEventWithName("didUpdateDimensions",this.exportedDimensions());}}]);return RCTDeviceInfo;}(_RCTEventEmitter3.default))||_class);exports.default=RCTDeviceInfo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1JlYWN0RG9tL21vZHVsZXMvUkNURGV2aWNlSW5mby5qcyJdLCJuYW1lcyI6WyJSQ1REZXZpY2VJbmZvIiwiYnJpZGdlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpZFVwZGF0ZURpbWVuc2lvbnMiLCJiaW5kIiwibWF0Y2hNZWRpYSIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJDb3VudCIsIkRpbWVuc2lvbnMiLCJleHBvcnRlZERpbWVuc2lvbnMiLCJkaW1zIiwid2lkdGgiLCJNYXRoIiwiY2VpbCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsInNjYWxlIiwiZ2V0RGV2aWNlUGl4ZWxSYXRpbyIsImZvbnRTY2FsZSIsInNjcmVlbiIsInJhdGlvIiwic3lzdGVtWERQSSIsInVuZGVmaW5lZCIsImxvZ2ljYWxYRFBJIiwiZGV2aWNlUGl4ZWxSYXRpbyIsIm1pbiIsInNlbmRFdmVudFdpdGhOYW1lIl0sIm1hcHBpbmdzIjoiNmxCQUtBLGdELG1EQUNBLG1ELHNKQUdNQSxjLE9BREwsaUNBQWtCLGVBQWxCLEMsK0ZBRUMsdUJBQVlDLE1BQVosQ0FBK0IsbUxBQ3ZCQSxNQUR1QixHQUc3QkMsT0FBT0MsZ0JBQVAsQ0FDRSxRQURGLENBRUUsTUFBS0MsbUJBQUwsQ0FBeUJDLElBQXpCLE9BRkYsQ0FHRSxLQUhGLEVBTUFILE9BQ0dJLFVBREgsQ0FDYyxvQ0FEZCxFQUVHQyxXQUZILENBRWUsTUFBS0gsbUJBQUwsQ0FBeUJDLElBQXpCLE9BRmYsRUFJQSxNQUFLRyxhQUFMLENBQXFCLENBQXJCLENBYjZCLGFBYzlCLEMsb0dBRW1CLENBQ2xCLE1BQU8sQ0FDTEMsV0FBWSxLQUFLQyxrQkFBTCxFQURQLENBQVAsQ0FHRCxDLHlEQUVpQixDQUNoQixNQUFPLENBQUMscUJBQUQsQ0FBUCxDQUNELEMsK0RBRW9CLENBQ25CLEdBQU1DLE1BQU8sQ0FDWEMsTUFBT0MsS0FBS0MsSUFBTCxDQUFVWixPQUFPYSxVQUFqQixDQURJLENBRVhDLE9BQVFILEtBQUtDLElBQUwsQ0FBVVosT0FBT2UsV0FBakIsQ0FGRyxDQUdYQyxNQUFPLEtBQUtDLG1CQUFMLEVBSEksQ0FJWEMsVUFBVyxDQUpBLENBQWIsQ0FPQSxNQUFPLENBQ0xsQixPQUFRUyxJQURILENBRUxVLE9BQVFWLElBRkgsQ0FBUCxDQUlELEMsaUVBRTZCLENBQzVCLEdBQUlXLE9BQVEsQ0FBWixDQUVBLEdBQ0VwQixPQUFPbUIsTUFBUCxDQUFjRSxVQUFkLEdBQTZCQyxTQUE3QixFQUNBdEIsT0FBT21CLE1BQVAsQ0FBY0ksV0FBZCxHQUE4QkQsU0FEOUIsRUFFQXRCLE9BQU9tQixNQUFQLENBQWNFLFVBQWQsQ0FBMkJyQixPQUFPbUIsTUFBUCxDQUFjSSxXQUgzQyxDQUlFLENBRUFILE1BQVFwQixPQUFPbUIsTUFBUCxDQUFjRSxVQUFkLENBQTJCckIsT0FBT21CLE1BQVAsQ0FBY0ksV0FBakQsQ0FDRCxDQVBELElBT08sSUFBSXZCLE9BQU93QixnQkFBUCxHQUE0QkYsU0FBaEMsQ0FBMkMsQ0FDaERGLE1BQVFwQixPQUFPd0IsZ0JBQWYsQ0FDRCxDQUlELE1BQU9iLE1BQUtjLEdBQUwsQ0FBU0wsS0FBVCxDQUFnQixDQUFoQixDQUFQLENBQ0QsQyxpRUFFcUIsQ0FDcEIsS0FBS00saUJBQUwsQ0FBdUIscUJBQXZCLENBQThDLEtBQUtsQixrQkFBTCxFQUE5QyxFQUNELEMsZ0ZBR1lWLGEiLCJmaWxlIjoiUkNURGV2aWNlSW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHByb3ZpZGVzTW9kdWxlIFJDVERldmljZUluZm9cbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IFJDVEJyaWRnZSwgeyBSQ1RfRVhQT1JUX01PRFVMRSwgUkNUX0VYUE9SVF9NRVRIT0QgfSBmcm9tIFwiUkNUQnJpZGdlXCI7XG5pbXBvcnQgUkNURXZlbnRFbWl0dGVyIGZyb20gXCJSQ1ROYXRpdmVFdmVudEVtaXR0ZXJcIjtcblxuQFJDVF9FWFBPUlRfTU9EVUxFKFwiUkNURGV2aWNlSW5mb1wiKVxuY2xhc3MgUkNURGV2aWNlSW5mbyBleHRlbmRzIFJDVEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGJyaWRnZTogUkNUQnJpZGdlKSB7XG4gICAgc3VwZXIoYnJpZGdlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJyZXNpemVcIixcbiAgICAgIHRoaXMuZGlkVXBkYXRlRGltZW5zaW9ucy5iaW5kKHRoaXMpLFxuICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgd2luZG93XG4gICAgICAubWF0Y2hNZWRpYShcInNjcmVlbiBhbmQgKG1pbi1yZXNvbHV0aW9uOiAyZHBweClcIilcbiAgICAgIC5hZGRMaXN0ZW5lcih0aGlzLmRpZFVwZGF0ZURpbWVuc2lvbnMuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLmxpc3RlbmVyQ291bnQgPSAxO1xuICB9XG5cbiAgY29uc3RhbnRzVG9FeHBvcnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIERpbWVuc2lvbnM6IHRoaXMuZXhwb3J0ZWREaW1lbnNpb25zKClcbiAgICB9O1xuICB9XG5cbiAgc3VwcG9ydGVkRXZlbnRzKCkge1xuICAgIHJldHVybiBbXCJkaWRVcGRhdGVEaW1lbnNpb25zXCJdO1xuICB9XG5cbiAgZXhwb3J0ZWREaW1lbnNpb25zKCkge1xuICAgIGNvbnN0IGRpbXMgPSB7XG4gICAgICB3aWR0aDogTWF0aC5jZWlsKHdpbmRvdy5pbm5lcldpZHRoKSxcbiAgICAgIGhlaWdodDogTWF0aC5jZWlsKHdpbmRvdy5pbm5lckhlaWdodCksXG4gICAgICBzY2FsZTogdGhpcy5nZXREZXZpY2VQaXhlbFJhdGlvKCksXG4gICAgICBmb250U2NhbGU6IDFcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpbmRvdzogZGltcyxcbiAgICAgIHNjcmVlbjogZGltc1xuICAgIH07XG4gIH1cblxuICBnZXREZXZpY2VQaXhlbFJhdGlvKCk6IG51bWJlciB7XG4gICAgbGV0IHJhdGlvID0gMTtcbiAgICAvLyBUbyBhY2NvdW50IGZvciB6b29tLCBjaGFuZ2UgdG8gdXNlIGRldmljZVhEUEkgaW5zdGVhZCBvZiBzeXN0ZW1YRFBJXG4gICAgaWYgKFxuICAgICAgd2luZG93LnNjcmVlbi5zeXN0ZW1YRFBJICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHdpbmRvdy5zY3JlZW4ubG9naWNhbFhEUEkgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgd2luZG93LnNjcmVlbi5zeXN0ZW1YRFBJID4gd2luZG93LnNjcmVlbi5sb2dpY2FsWERQSVxuICAgICkge1xuICAgICAgLy8gT25seSBhbGxvdyBmb3IgdmFsdWVzID4gMVxuICAgICAgcmF0aW8gPSB3aW5kb3cuc2NyZWVuLnN5c3RlbVhEUEkgLyB3aW5kb3cuc2NyZWVuLmxvZ2ljYWxYRFBJO1xuICAgIH0gZWxzZSBpZiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB9XG5cbiAgICAvLyBpT1MgZGlzcGxheXMgd2l0aCAzeCByYXRpbyBkb24ndCBwcm9wZXJseSBkaXNwbGF5IGhhaXJsaW5lc1xuICAgIC8vIHNvIHNldCBtYXggcmF0aW8gdG8gMlxuICAgIHJldHVybiBNYXRoLm1pbihyYXRpbywgMik7XG4gIH1cblxuICBkaWRVcGRhdGVEaW1lbnNpb25zKCkge1xuICAgIHRoaXMuc2VuZEV2ZW50V2l0aE5hbWUoXCJkaWRVcGRhdGVEaW1lbnNpb25zXCIsIHRoaXMuZXhwb3J0ZWREaW1lbnNpb25zKCkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJDVERldmljZUluZm87XG4iXX0=