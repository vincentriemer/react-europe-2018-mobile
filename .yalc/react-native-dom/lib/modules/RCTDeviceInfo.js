Object.defineProperty(exports,"__esModule",{value:true});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _dec,_class;var _RCTBridge=require("./../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);var _RCTEventEmitter2=require("./RCTEventEmitter");var _RCTEventEmitter3=_interopRequireDefault(_RCTEventEmitter2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var RCTDeviceInfo=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTDeviceInfo"),_dec(_class=function(_RCTEventEmitter){(0,_inherits3.default)(RCTDeviceInfo,_RCTEventEmitter);function RCTDeviceInfo(){var _ref;var _temp,_this,_ret;(0,_classCallCheck3.default)(this,RCTDeviceInfo);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=(0,_possibleConstructorReturn3.default)(this,(_ref=RCTDeviceInfo.__proto__||Object.getPrototypeOf(RCTDeviceInfo)).call.apply(_ref,[this].concat(args))),_this),_this.didUpdateDimensions=function(){_this.sendEventWithName("didUpdateDimensions",_this.exportedDimensions());},_temp),(0,_possibleConstructorReturn3.default)(_this,_ret);}(0,_createClass3.default)(RCTDeviceInfo,[{key:"startObserving",value:function startObserving(){window.addEventListener("resize",this.didUpdateDimensions,false);window.matchMedia("screen and (min-resolution: 2dppx)").addListener(this.didUpdateDimensions);}},{key:"stopObserving",value:function stopObserving(){window.removeEventListener("resize",this.didUpdateDimensions,false);window.matchMedia("screen and (min-resolution: 2dppx)").removeEventListener(this.didUpdateDimensions);}},{key:"constantsToExport",value:function constantsToExport(){return{Dimensions:this.exportedDimensions()};}},{key:"supportedEvents",value:function supportedEvents(){return["didUpdateDimensions"];}},{key:"exportedDimensions",value:function exportedDimensions(){var dims={width:Math.ceil(window.innerWidth),height:Math.ceil(window.innerHeight),scale:this.getDevicePixelRatio(),fontScale:1};return{window:dims,screen:dims};}},{key:"getDevicePixelRatio",value:function getDevicePixelRatio(){var ratio=1;if(window.screen.systemXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.systemXDPI>window.screen.logicalXDPI){ratio=window.screen.systemXDPI/window.screen.logicalXDPI;}else if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio;}return Math.min(ratio,2);}}]);return RCTDeviceInfo;}(_RCTEventEmitter3.default))||_class);exports.default=RCTDeviceInfo;
//# sourceMappingURL=RCTDeviceInfo.js.map