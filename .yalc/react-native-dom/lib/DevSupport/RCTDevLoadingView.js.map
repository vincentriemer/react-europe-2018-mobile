{"version":3,"sources":["../../ReactDom/DevSupport/RCTDevLoadingView.js"],"names":["RCTDevLoadingView","bridge","initView","addListener","hide","bind","loading","showWithURL","URL","bundleLocation","view","document","createElement","style","width","height","fontFamily","fontSize","display","alignItems","justifyContent","position","zIndex","top","left","transition","transform","overflow","documentElement","appendChild","innerText","message","color","backgroundColor","hidden","a","r","g","b","stringValue","updateView","done","total","toFixed","showMessage","url","href"],"mappings":"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","file":"RCTDevLoadingView.js","sourcesContent":["/**\n * @providesModule RCTDevLoadingView\n * @flow\n */\n\nimport RCTBridge, {\n  RCT_EXPORT_MODULE,\n  RCT_EXPORT_METHOD,\n  RCTFunctionTypeNormal\n} from \"RCTBridge\";\nimport NotificationCenter from \"NotificationCenter\";\nimport { defaultFontStack } from \"RCTSharedTextValues\";\nimport ColorArrayFromHexARGB from \"ColorArrayFromHexARGB\";\n\n@RCT_EXPORT_MODULE(\"RCTDevLoadingView\")\nclass RCTDevLoadingView {\n  bridge: RCTBridge;\n  hidden: boolean;\n  color: string;\n  backgroundColor: string;\n  message: string;\n  view: HTMLDivElement;\n\n  constructor(bridge: RCTBridge) {\n    this.bridge = bridge;\n\n    this.initView();\n\n    NotificationCenter.addListener(\n      \"RCTJavaScriptDidLoadNotification\",\n      this.hide.bind(this)\n    );\n\n    if (this.bridge.loading) {\n      this.showWithURL(new URL(bridge.bundleLocation));\n    }\n  }\n\n  initView() {\n    this.view = document.createElement(\"div\");\n    Object.assign(this.view.style, {\n      width: \"100%\",\n      height: \"22px\",\n      fontFamily: defaultFontStack,\n      fontSize: \"12px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      position: \"fixed\",\n      zIndex: \"99999\",\n      top: \"0\",\n      left: \"0\",\n      transition: \"transform 0.1s\",\n      transform: \"translateY(-22px)\",\n      overflow: \"hidden\"\n    });\n    if (document.documentElement) {\n      document.documentElement.appendChild(this.view);\n    }\n  }\n\n  updateView() {\n    this.view.innerText = this.message;\n    Object.assign(this.view.style, {\n      color: this.color,\n      backgroundColor: this.backgroundColor,\n      transform: this.hidden ? \"translateY(-22px)\" : \"translateY(0px)\"\n    });\n  }\n\n  @RCT_EXPORT_METHOD(RCTFunctionTypeNormal)\n  showMessage(\n    message: string,\n    color: string | number,\n    backgroundColor: string | number\n  ) {\n    this.message = message;\n\n    if (typeof color === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(color);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.color = stringValue;\n    } else {\n      this.color = color;\n    }\n\n    if (typeof backgroundColor === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(backgroundColor);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.backgroundColor = stringValue;\n    } else {\n      this.backgroundColor = backgroundColor;\n    }\n\n    this.hidden = false;\n    this.updateView();\n  }\n\n  @RCT_EXPORT_METHOD(RCTFunctionTypeNormal)\n  hide() {\n    // console.log(\"DevLoadingView.hide\");\n    this.hidden = true;\n    this.updateView();\n  }\n\n  updateProgress({ done, total }: { done: number, total: number }) {\n    const color = \"white\";\n    const backgroundColor = \"#005900\";\n    const message = `Loading ${(done / total * 100).toFixed(\n      0\n    )}% (${done}/${total})`;\n    this.showMessage(message, color, backgroundColor);\n  }\n\n  showWithURL(url: URL) {\n    const color = \"white\";\n    const backgroundColor = \"#005900\";\n    const message = `Loading from ${url.href}...`;\n    this.showMessage(message, color, backgroundColor);\n  }\n}\n\nexport default RCTDevLoadingView;\n"]}