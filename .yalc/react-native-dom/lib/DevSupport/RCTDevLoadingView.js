Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray2=require("babel-runtime/helpers/slicedToArray");var _slicedToArray3=_interopRequireDefault(_slicedToArray2);var _extends2=require("babel-runtime/helpers/extends");var _extends3=_interopRequireDefault(_extends2);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _dec,_dec2,_dec3,_class,_desc,_value,_class2;var _RCTBridge=require("./../bridge/RCTBridge");var _RCTBridge2=_interopRequireDefault(_RCTBridge);var _NotificationCenter=require("./../base/NotificationCenter");var _NotificationCenter2=_interopRequireDefault(_NotificationCenter);var _RCTSharedTextValues=require("./../views/Text/RCTSharedTextValues");var _ColorArrayFromHexARGB=require("./../utils/ColorArrayFromHexARGB");var _ColorArrayFromHexARGB2=_interopRequireDefault(_ColorArrayFromHexARGB);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};Object['ke'+'ys'](descriptor).forEach(function(key){desc[key]=descriptor[key];});desc.enumerable=!!desc.enumerable;desc.configurable=!!desc.configurable;if('value'in desc||desc.initializer){desc.writable=true;}desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc;},desc);if(context&&desc.initializer!==void 0){desc.value=desc.initializer?desc.initializer.call(context):void 0;desc.initializer=undefined;}if(desc.initializer===void 0){Object['define'+'Property'](target,property,desc);desc=null;}return desc;}var RCTDevLoadingView=(_dec=(0,_RCTBridge.RCT_EXPORT_MODULE)("RCTDevLoadingView"),_dec2=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec3=(0,_RCTBridge.RCT_EXPORT_METHOD)(_RCTBridge.RCTFunctionTypeNormal),_dec(_class=(_class2=function(){function RCTDevLoadingView(bridge){(0,_classCallCheck3.default)(this,RCTDevLoadingView);this.bridge=bridge;this.initView();_NotificationCenter2.default.addListener("RCTJavaScriptDidLoadNotification",this.hide.bind(this));if(this.bridge.loading){this.showWithURL(new URL(bridge.bundleLocation));}}(0,_createClass3.default)(RCTDevLoadingView,[{key:"initView",value:function initView(){this.view=document.createElement("div");(0,_extends3.default)(this.view.style,{width:"100%",height:"22px",fontFamily:_RCTSharedTextValues.defaultFontStack,fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",zIndex:"99999",top:"0",left:"0",transition:"transform 0.1s",transform:"translateY(-22px)",overflow:"hidden"});if(document.documentElement){document.documentElement.appendChild(this.view);}}},{key:"updateView",value:function updateView(){this.view.innerText=this.message;(0,_extends3.default)(this.view.style,{color:this.color,backgroundColor:this.backgroundColor,transform:this.hidden?"translateY(-22px)":"translateY(0px)"});}},{key:"showMessage",value:function showMessage(message,color,backgroundColor){this.message=message;if(typeof color==="number"){var _ColorArrayFromHexARG=(0,_ColorArrayFromHexARGB2.default)(color),_ColorArrayFromHexARG2=(0,_slicedToArray3.default)(_ColorArrayFromHexARG,4),a=_ColorArrayFromHexARG2[0],r=_ColorArrayFromHexARG2[1],g=_ColorArrayFromHexARG2[2],b=_ColorArrayFromHexARG2[3];var stringValue="rgba("+r+","+g+","+b+","+a+")";this.color=stringValue;}else{this.color=color;}if(typeof backgroundColor==="number"){var _ColorArrayFromHexARG3=(0,_ColorArrayFromHexARGB2.default)(backgroundColor),_ColorArrayFromHexARG4=(0,_slicedToArray3.default)(_ColorArrayFromHexARG3,4),_a=_ColorArrayFromHexARG4[0],_r=_ColorArrayFromHexARG4[1],_g=_ColorArrayFromHexARG4[2],_b=_ColorArrayFromHexARG4[3];var _stringValue="rgba("+_r+","+_g+","+_b+","+_a+")";this.backgroundColor=_stringValue;}else{this.backgroundColor=backgroundColor;}this.hidden=false;this.updateView();}},{key:"hide",value:function hide(){this.hidden=true;this.updateView();}},{key:"updateProgress",value:function updateProgress(_ref){var done=_ref.done,total=_ref.total;var color="white";var backgroundColor="#005900";var message="Loading "+(done/total*100).toFixed(0)+"% ("+done+"/"+total+")";this.showMessage(message,color,backgroundColor);}},{key:"showWithURL",value:function showWithURL(url){var color="white";var backgroundColor="#005900";var message="Loading from "+url.href+"...";this.showMessage(message,color,backgroundColor);}}]);return RCTDevLoadingView;}(),(_applyDecoratedDescriptor(_class2.prototype,"showMessage",[_dec2],Object.getOwnPropertyDescriptor(_class2.prototype,"showMessage"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"hide",[_dec3],Object.getOwnPropertyDescriptor(_class2.prototype,"hide"),_class2.prototype)),_class2))||_class);exports.default=RCTDevLoadingView;
//# sourceMappingURL=RCTDevLoadingView.js.map